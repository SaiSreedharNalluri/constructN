/*!
 * LMV v7.0.4
 * 
 * Copyright 2019 Autodesk, Inc.
 * All rights reserved.
 * 
 * This computer source code and related instructions and comments are the
 * unpublished confidential and proprietary information of Autodesk, Inc.
 * and are protected under Federal copyright and state trade secret law.
 * They may not be disclosed to, copied or used by any third party without
 * the prior written consent of Autodesk, Inc.
 * 
 * Autodesk Forge Viewer Usage Limitations:
 * 
 * The Autodesk Forge viewer can only be used to view files generated by
 * Autodesk Forge services. The Autodesk Forge Viewer JavaScript must be
 * delivered from an Autodesk hosted URL.
 */
Autodesk.Extensions.Section=function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=198)}({0:function(t,e,n){"use strict";n.r(e),n.d(e,"TOL",function(){return i}),n.d(e,"isZero",function(){return o}),n.d(e,"isEqual",function(){return r});var i=1e-6;function o(t){return Math.abs(t)<i}function r(t,e){return o(t-e)}},1:function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var o=(s=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),r=i.sources.map(function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"});return[n].concat(r).concat([o]).join("\n")}var s;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(i[r]=!0)}for(o=0;o<t.length;o++){var s=t[o];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},10:function(t,e,n){"use strict";n.r(e),n.d(e,"xLineBox",function(){return c});var i=0,o=1,r=2,s=4,a=8;function h(t,e,n,h,c,l){var u;return u=i,t<n?u|=o:t>c&&(u|=r),e<h?u|=s:e>l&&(u|=a),u}function c(t,e,n,i,c,l,u,p){for(var d=h(t,e,c,l,u,p),f=h(n,i,c,l,u,p),y=!1;;){if(!(d|f)){y=!0;break}if(d&f)break;var E=void 0,v=void 0,g=d||f;g&a?(E=t+(n-t)*(p-e)/(i-e),v=p):g&s?(E=t+(n-t)*(l-e)/(i-e),v=l):g&r?(v=e+(i-e)*(u-t)/(n-t),E=u):g&o&&(v=e+(i-e)*(c-t)/(n-t),E=c),g===d?d=h(t=E,e=v,c,l,u,p):f=h(n=E,i=v,c,l,u,p)}return y}},11:function(t,e,n){"use strict";function i(t,e,n,i,o,r,s,a){return t<=s&&e<=a&&n>=o&&i>=r}n.r(e),n.d(e,"xBoxBox",function(){return i})},121:function(t,e,n){var i=n(122);"string"==typeof i&&(i=[[t.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(2)(i,o);i.locals&&(t.exports=i.locals)},122:function(t,e,n){(t.exports=n(1)(!1)).push([t.i,"/**\n * Section CSS\n **/\n.sectionPanel {\n    line-height: 14px;\n    text-align: left;\n    z-index: 10;\n}\n\n.section-horizontal-divider\n{\n    height: 1px;\n    border-top: 1px solid rgba(200,200,200,0.8);\n}\n\n.section-submenu-select\n{\n    display: block;\n    position: relative;\n    width: calc(100% - 40px);\n    padding: 10px 20px 0px 20px;\n    opacity: 0.3;\n}\n\n.section-panel:hover .section-submenu-select {\n   opacity: 0.8;\n}\n\n.section-submenu-selectlabel\n{\n    position: relative;\n    display:  inline-block;\n    padding-right:  20px;\n    padding-bottom:  4px;\n}\n\n.section-restart {\n    margin: 10px 20px 15px 20px;\n    padding: 6px 10px 6px 10px;\n    width: calc(100% - 55px);\n    cursor: pointer;\n}\n\n.docking-panel:hover .section-restart {\n    background-color: rgba(255,255,255, .12);\n}\n\n.docking-panel .section-restart:hover {\n    background-color: rgba(166,194,255, 0.7);\n    -webkit-transition: all 0.2s ease;\n    -moz-transition: all 0.2s ease;\n    -ms-transition: all 0.2s ease;\n    -o-transition: all 0.2s ease;\n    transition: all 0.2s ease;\n}\n\n",""])},13:function(t,e,n){"use strict";n.r(e),n.d(e,"xTrianglePlane",function(){return c});var i=n(0),o=n(6),r=Autodesk.Viewing.Private.logger;function s(t,e,n,i,o,r,s){this.v1=t.clone(),this.v2=e.clone()}var a=new THREE.Vector3,h=new THREE.Vector3;function c(t,e,n,c,l,u,p,d,f){var y=t.distanceToPoint(e),E=t.distanceToPoint(n),v=t.distanceToPoint(c);if(y<-i.TOL&&E<-i.TOL&&v<-i.TOL)return null;if(y>i.TOL&&E>i.TOL&&v>i.TOL)return null;var g,m,x,w,T,b,R=Math.sign(y),H=Math.sign(E),M=Math.sign(v);if(0===R&&0===H&&0===M)return null;if(R!==H){var P=Object(o.xPlaneSegment)(t,e,n,a,h);if(2===P)return void d.push(new s(e,n,l,l,u,u,f));1===P?(x=l,w=u,g=a.clone()):r.warn("Unexpected zero intersections where at least one was expected")}if(H!==M){var _=Object(o.xPlaneSegment)(t,n,c,a,h);if(2===_)return void d.push(new s(n,c,u,u,p,p,f));1===_?g?a.distanceTo(g)>i.TOL&&(T=u,b=p,m=a.clone()):(x=u,w=p,g=a.clone()):r.warn("Unexpected zero intersections where at least one was expected")}if(M!==R){var C=Object(o.xPlaneSegment)(t,c,e,a,h);if(2===C)return void d.push(new s(c,e,p,p,l,l,f));1===C?g?a.distanceTo(g)>i.TOL&&(T=p,b=l,m=a.clone()):r.warn("Unexpected single intersection point"):r.warn("Unexpected zero intersections where at least one was expected")}g&&m&&d.push(new s(g,m,x,w,T,b,f))}},14:function(t,e,n){"use strict";n.r(e),n.d(e,"UniquePointList",function(){return a});var i=n(0),o=n(9),r=n(5);function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=function(){function t(e,n,r,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bbox=e,this.boxSize=this.bbox.size().length(),"number"==typeof n?(this.precisionTolerance=n,this.scale=1/this.precisionTolerance):(this.precisionTolerance=i.TOL*this.boxSize,this.scale=1/this.precisionTolerance),this.snapBaseX=this.bbox.min.x,this.snapBaseY=this.bbox.min.y,this.pts=[],this.xymap={},s&&(this.quadTreeVerts=new o.QuadTree(e.min.x,e.min.y,e.max.x,e.max.y,n)),this.vertexConstructor=r}var e,n,a;return e=t,(n=[{key:"findOrAddPoint",value:function(t,e,n){for(var i,o=0|(t-this.snapBaseX)*this.scale,s=0|(e-this.snapBaseY)*this.scale,a=1/0,h=o-1;h<=o+1;h++){var c=this.xymap[h];if(c)for(var l=s-1;l<=s+1;l++){var u=c[l];if(u){var p=(u.x-t)*(u.x-t)+(u.y-e)*(u.y-e);p<a&&(i=u,a=p)}}}if(Math.sqrt(a)>this.precisionTolerance&&(i=void 0),void 0===i){var d=this.xymap[o];d||(d=this.xymap[o]={}),i=this.vertexConstructor?new this.vertexConstructor(t,e):new r.Point(t,e),d[s]=i,i.id=this.pts.length,this.pts.push(i),this.quadTreeVerts&&this.quadTreeVerts.addItem(i)}if(void 0!==n){if("number"==typeof n)-1===i.dbIds.indexOf(n)&&i.dbIds.push(n);else if(n)for(var f=0;f<n.length;f++){var y=n[f];-1===i.dbIds.indexOf(y)&&i.dbIds.push(y)}i.dbIdsChanged=!0}return i}},{key:"forEach",value:function(t){this.pts.forEach(t)}},{key:"delete",value:function(t){this.pts[t.id]=void 0,this.quadTreeVerts&&this.quadTreeVerts.deleteItem(t)}},{key:"compact",value:function(){for(var t=[],e=0,n=this.pts.length;e<n;e++){var i=this.pts[e];i&&(i.oldid=i.id,i.id=t.length,t.push(i))}this.pts=t}},{key:"enumInBox",value:function(t,e,n,i,o){this.quadTreeVerts.enumInBox(t,e,n,i,o)}}])&&s(e.prototype,n),a&&s(e,a),t}()},15:function(t,e,n){"use strict";n.r(e),n.d(e,"ComplexPolygon",function(){return a});var i=n(5),o=n(8);function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s=Autodesk.Viewing.Private;s.logger;var a=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pts=e,this.contours=[],this.customInsideChecker=n,this.bbox=i}var e,n,a;return e=t,(n=[{key:"addContour",value:function(t){this.contours.push(t)}},{key:"pointInContour",value:function(t,e,n){var i,o,r,s,a,h,c=!1,l=this.pts;r=l[n[n.length-1]].x,i=(s=l[n[n.length-1]].y)>=e;for(var u=0,p=n.length;u<p;++u)a=l[n[u]].x,i!=(o=(h=l[n[u]].y)>=e)&&(h-e)*(r-a)>=(a-t)*(s-h)==o&&(c=!c),i=o,r=a,s=h;return c}},{key:"pointInPolygon",value:function(t,e){for(var n=!1,i=0;i<this.contours.length;i++)this.pointInContour(t,e,this.contours[i])&&(n=!n);return n}},{key:"triangulate",value:function(){try{this.triangulateInternal()}catch(t){if(-1!==t.message.indexOf("Collinear not supported!"))try{this.triangulateInternal(!0)}catch(t){this.triangulationFailed=!0}else this.triangulationFailed=!0}}},{key:"createPointInPolygonChecker",value:function(){for(var t=[],e=0;e<this.contours.length;e++)for(var n=this.contours[e],i=n.length,r=0;r<i-1;r++){var s={p1:n[r],p2:n[r+1]};t.push(s)}var a=new o.IntervalTree(this.pts,t,this.bbox);a.build(),this.customInsideChecker=a}},{key:"triangulateInternal",value:function(t){if(!this.contours.length)return this.triangulationFailed=!0,void(this.indices=null);this.indices=[];var e=function(t,e){for(var n=e.size(),i=e.min.x+.5*n.x,o=e.min.y+.5*n.y,r=2/n.length(),s=[],a=0,h=t.length;a<h;a++)s.push({x:(t[a].x-i)*r,y:(t[a].y-o)*r,_triidx:a+1});return s}(this.pts,this.bbox);t&&function(t){for(var e=0,n=t.length;e<n;e++)t[e].x+=1e-9*(Math.random()-.5),t[e].y+=1e-9*(Math.random()-.5)}(e);var n=new i.SweepContext([]);n.points_=e;for(var o=0;o<this.contours.length;o++){for(var r=this.contours[o],s=r[0]!==r[r.length-1],a=s?r.length:r.length-1,h=new Array(a),c=0;c<a;c++)h[c]=e[r[c]];n.initEdges(h,s)}n.triangulate(),this.processResult(n),this.triangulationFailed=!this.indices||!this.indices.length}},{key:"processResult",value:function(t){this.pts.length>10&&!this.customInsideChecker&&this.createPointInPolygonChecker();for(var e=t.map_,n=0;n<e.length;n++){var i=e[n].points_,o=i[0],r=i[1],s=i[2],a=o._triidx,h=r._triidx,c=s._triidx;a&&h&&c&&this.filterFace(a-1,h-1,c-1)}}},{key:"filterFace",value:function(t,e,n){var i=this.pts[t],o=this.pts[e],r=this.pts[n],s=(i.x+o.x+r.x)/3,a=(i.y+o.y+r.y)/3;if(this.customInsideChecker?this.customInsideChecker.pointInPolygon(s,a):this.pointInPolygon(s,a)){var h=o.x-i.x,c=o.y-i.y,l=r.x-i.x;h*(r.y-i.y)-l*c>0?this.indices.push(t,e,n):this.indices.push(t,n,e)}}},{key:"toPolygonMesh",value:function(t){if(this.polygonMesh)return this.polygonMesh;for(var e=this.pts,n=new THREE.BufferGeometry,i=new Float32Array(3*e.length),o=0;o<e.length;o++)i[3*o]=e[o].x,i[3*o+1]=e[o].y,i[3*o+2]=0;n.addAttribute("position",new THREE.BufferAttribute(i,3));for(var r=t?new Uint16Array(2*e.length):new Float32Array(3*e.length),s=0;s<e.length;s++)if(t){var a=.5*(0/Math.PI+1);r[2*s]=65535*a|0,r[2*s+1]=65535}else r[3*s]=0,r[3*s+1]=0,r[3*s+2]=1;n.addAttribute("normal",new THREE.BufferAttribute(r,t?2:3)),t&&(n.attributes.normal.bytesPerItem=2,n.attributes.normal.normalize=!0);var h=new Uint16Array(this.indices.length);return h.set(this.indices),n.addAttribute("index",new THREE.BufferAttribute(h,1)),n.streamingDraw=!0,n.streamingIndex=!0,this.polygonMesh=n,n}},{key:"toExtrudedMesh",value:function(t){if(this.extrudedMesh)return this.extrudedMesh;if(void 0===t&&(t=1),!this.indices)return null;for(var e=[],n=[],i=[],o=0,r=this.pts,a=0;a<r.length;a++)e.push(r[a].x,r[a].y,0),e.push(0,0,1);for(var h=this.indices,c=0;c<h.length;c+=3)n.push(h[c],h[c+1],h[c+2]);o+=r.length;for(var l=0;l<r.length;l++)e.push(r[l].x,r[l].y,-t),e.push(0,0,-1);for(var u=0;u<h.length;u+=3)n.push(o+h[u],o+h[u+2],o+h[u+1]);o+=r.length;for(var p=new Vector3,d=new Box3,f=0;f<this.contours.length;f++)for(var y=this.contours[f],E=0;E<y.length-1;E++){var v=this.pts[y[E]].x,g=this.pts[y[E]].y;p.set(v,g,0),d.expandByPoint(p);var m=this.pts[y[E+1]].x,x=this.pts[y[E+1]].y;p.set(m,x,0),d.expandByPoint(p),p.set(v,g,0-t),d.expandByPoint(p),p.set(g-x,m-v,0).normalize(),i.push(o,o+1,o,o+2,o+1,o+3,o+2,o+3),f>0?(e.push(v,g,0,-p.x,-p.y,-p.z,m,x,0,-p.x,-p.y,-p.z,v,g,0-t,-p.x,-p.y,-p.z,m,x,0-t,-p.x,-p.y,-p.z),n.push(o,o+3,o+2,o,o+1,o+3)):(e.push(v,g,0,p.x,p.y,p.z,m,x,0,p.x,p.y,p.z,v,g,0-t,p.x,p.y,p.z,m,x,0-t,p.x,p.y,p.z),n.push(o,o+2,o+3,o+0,o+3,o+1)),o+=4}var w=new Float32Array(e.length);w.set(e);var T=new Uint16Array(n.length);T.set(n);var b=new Uint16Array(i.length);b.set(i);var R={mesh:{vb:w,indices:T,iblines:b,vbstride:6,vblayout:{position:{offset:0,itemSize:3,bytesPerItem:4},normal:{offset:3,itemSize:3,bytesPerItem:4}},boundingBox:d,boundingSphere:{center:d.center(),radius:.5*d.size().length}}};return s.BufferGeometryUtils.meshToGeometry(R),R.geometry.streamingDraw=!0,R.geometry.streamingIndex=!0,this.extrudedMesh=R.geometry,this.extrudedMesh}}])&&r(e.prototype,n),a&&r(e,a),t}()},16:function(t,e,n){"use strict";n.r(e),n.d(e,"xMeshPlane",function(){return h}),n.d(e,"makePlaneBasis",function(){return c}),n.d(e,"convertToPlaneCoords",function(){return l});var i=n(0),o=n(13),r=Autodesk.Viewing.Private.VertexEnumerator,s=new THREE.Matrix4,a=new THREE.Plane;function h(t,e,n){var i=e.geometry;if(i){var h=n.length,c=e.matrixWorld;s.getInverse(c),a.copy(t).applyMatrix4(s),r.enumMeshTriangles(i,function(t,i,r,s,h,c){Object(o.xTrianglePlane)(a,t,i,r,s,h,c,n,e.fragId)});for(var l=h,u=n.length;l<u;l++)n[l].v1.applyMatrix4(c),n[l].v2.applyMatrix4(c)}}function c(t){var e=new THREE.Vector3(0,0,1),n=t.normal.clone().cross(e);n=n.normalize();var o,r,s,a,h,c,l,u,p,d,f=e.dot(t.normal),y=new THREE.Matrix4;return Object(i.isZero)(n.x)&&Object(i.isZero)(n.y)&&Object(i.isZero)(n.z)?y.elements[14]=f*t.constant:(o=n,r=y,s=f,a=Math.sqrt(1-s*s),h=1-s,c=o.x,l=o.y,u=o.z,p=h*c,d=h*l,r.set(p*c+s,p*l-a*u,p*u+a*l,0,p*l+a*u,d*l+s,d*u-a*c,0,p*u-a*l,d*u+a*c,h*u*u+s,0,0,0,0,1),y.elements[14]=t.constant),y}function l(t,e,n){for(var i=0;i<e.length;i++){var o=e[i];o.v1.applyMatrix4(t),o.v2.applyMatrix4(t),n.expandByPoint(o.v1),n.expandByPoint(o.v2)}}},18:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},198:function(t,e,n){"use strict";n.r(e);var i=n(16),o=n(21),r=n(8),s=n(14),a=n(15);function h(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var c=Autodesk.Viewing.Private,l=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.edges=e,this.bbox=n,this.verts=new s.UniquePointList(n,i),this.polygon=null}var e,n,i;return e=t,(n=[{key:"getPointIndex",value:function(t,e){return this.verts.findOrAddPoint(t,e).id}},{key:"snapEdges",value:function(){for(var t=0;t<this.edges.length;t++){var e=this.edges[t];e.p1=this.getPointIndex(e.v1.x,e.v1.y),e.p2=this.getPointIndex(e.v2.x,e.v2.y)}}},{key:"sanitizeEdges",value:function(){for(var t={},e=[],n=0,i=this.edges.length;n<i;n++){var o=this.edges[n];if(o.p1!==o.p2){var r=Math.min(o.p1,o.p2)+":"+Math.max(o.p1,o.p2);!0!==t[r]&&(t[r]=!0,e.push(o))}}this.edges=e}},{key:"stitchContours",value:function(){this.contours=[];for(var t={},e=0;e<this.edges.length;e++){var n=this.edges[e];n.p1!==n.p2&&(void 0!==t[n.p1]?t[n.p1].push(n.p2):t[n.p1]=[n.p2],void 0!==t[n.p2]?t[n.p2].push(n.p1):t[n.p2]=[n.p1])}var i=[];for(var o in t)if(2!==t[o].length){c.logger.warn("Incomplete edge table");break}for(;;){var r=void 0;for(var o in t)if(t[o].length>1){r=o;break}if(!r)for(var o in t)if(t[o].length>0){r=o;break}if(!r)break;var s=-1,a=parseInt(r),h=t[r];for(i.push(a);h&&h.length;){var l=h.shift();if(l===s&&(l=h.shift()),void 0===l){delete t[a];break}i.push(l),0==h.length?delete t[a]:h[0]===s&&delete t[a],s=a,a=l,h=t[l]}i.length&&(this.contours.push(i),i=[])}var u=[];for(e=0;e<this.contours.length;e++){(y=this.contours[e])[0]!==y[y.length-1]&&u.push(y)}if(u.length)for(var p=!0;p;){p=!1;var d={},f=this.contours;for(e=0;e<f.length;e++){var y,E=(y=f[e])[0],v=y[y.length-1];E!==v&&(d[E]?d[E].push(-e-1):d[E]=[-e-1],d[v]?d[v].push(e):d[v]=[e])}for(var o in d){var g=d[o];if(2==g.length){var m=void 0;if(g[0]<0&&g[1]<0){var x=-g[0]-1;f[w=-g[1]-1].shift(),Array.prototype.push.apply(f[x].reverse(),f[w]),m=w}if(g[0]<0&&g[1]>0){x=-g[0]-1;f[w=g[1]].pop(),Array.prototype.push.apply(f[w],f[x]),m=x}if(g[0]>0&&g[1]<0){x=g[0];var w=-g[1]-1;f[x].pop(),Array.prototype.push.apply(f[x],f[w]),m=w}if(g[0]>0&&g[1]>0){x=g[0],w=g[1];f[x].pop(),Array.prototype.push.apply(f[x],f[w].reverse()),m=w}void 0!==m&&(f.splice(m,1),p=!0);break}}}}},{key:"cleanupFlatEdges",value:function(){for(var t=this.verts.pts,e=this.verts.precisionTolerance,n=0;n<this.contours.length;n++)for(var i=this.contours[n];;){for(var o=-1,r=1;r<i.length-1;r++){var s=i[r-1],a=i[r],h=i[r+1],c=t[s],l=t[a],u=t[h],p=l.x-c.x,d=l.y-c.y,f=u.x-l.x,y=u.y-l.y,E=Math.sqrt(p*p+d*d);if(E<e){o=r;break}var v=Math.sqrt(f*f+y*y);if(v<e){o=r;break}var g=(p/=E)*(f/=v)+(d/=E)*(y/=v);if(Math.abs(g-1)<.01){o=r;break}}if(o<0)break;i.splice(o,1)}}},{key:"triangulate",value:function(){var t=new r.IntervalTree(this.verts.pts,this.edges,this.bbox);t.build();var e=new a.ComplexPolygon(this.verts.pts,t,this.bbox);return e.contours=this.contours,e.triangulate(),e}}])&&h(e.prototype,n),i&&h(e,i),t}();function u(){var t=function(t){THREE.MeshBasicMaterial.call(this),this.depthTest=!1,this.depthWrite=!1,this.side=THREE.FrontSide,this.transparent=!0,this.setValues(t),this.oldColor=this.color.clone(),this.oldOpacity=this.opacity,this.highlight=function(t){t?(this.color.setRGB(1,230/255,3/255),this.opacity=1):(this.color.copy(this.oldColor),this.opacity=this.oldOpacity)}};t.prototype=Object.create(THREE.MeshBasicMaterial.prototype);var e=function(t){THREE.LineBasicMaterial.call(this),this.depthTest=!1,this.depthWrite=!1,this.transparent=!0,this.linewidth=1,this.setValues(t),this.oldColor=this.color.clone(),this.oldOpacity=this.opacity,this.highlight=function(t){t?(this.color.setRGB(1,230/255,3/255),this.opacity=1):(this.color.copy(this.oldColor),this.opacity=this.oldOpacity)}};e.prototype=Object.create(THREE.LineBasicMaterial.prototype),void 0===THREE.PolyhedronGeometry&&(THREE.PolyhedronGeometry=function(t,e,n,i){THREE.Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},n=n||1,i=i||0;for(var o=this,r=0,s=t.length;r<s;r+=3)x(new THREE.Vector3(t[r],t[r+1],t[r+2]));var a=this.vertices,h=[],c=(r=0,0);for(s=e.length;r<s;r+=3,c++){var l=a[e[r]],u=a[e[r+1]],p=a[e[r+2]];h[c]=new THREE.Face3(l.index,u.index,p.index,[l.clone(),u.clone(),p.clone()])}var d=new THREE.Vector3;for(r=0,s=h.length;r<s;r++)T(h[r],i);for(r=0,s=this.faceVertexUvs[0].length;r<s;r++){var f=this.faceVertexUvs[0][r],y=f[0].x,E=f[1].x,v=f[2].x,g=Math.max(y,Math.max(E,v)),m=Math.min(y,Math.min(E,v));g>.9&&m<.1&&(y<.2&&(f[0].x+=1),E<.2&&(f[1].x+=1),v<.2&&(f[2].x+=1))}for(r=0,s=this.vertices.length;r<s;r++)this.vertices[r].multiplyScalar(n);function x(t){var e=t.normalize().clone();e.index=o.vertices.push(e)-1;var n=b(t)/2/Math.PI+.5,i=function(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}(t)/Math.PI+.5;return e.uv=new THREE.Vector2(n,1-i),e}function w(t,e,n){var i=new THREE.Face3(t.index,e.index,n.index,[t.clone(),e.clone(),n.clone()]);o.faces.push(i),d.copy(t).add(e).add(n).divideScalar(3);var r=b(d);o.faceVertexUvs[0].push([R(t.uv,t,r),R(e.uv,e,r),R(n.uv,n,r)])}function T(t,e){for(var n=Math.pow(2,e),i=(Math.pow(4,e),x(o.vertices[t.a])),r=x(o.vertices[t.b]),s=x(o.vertices[t.c]),a=[],h=0;h<=n;h++){a[h]=[];for(var c=x(i.clone().lerp(s,h/n)),l=x(r.clone().lerp(s,h/n)),u=n-h,p=0;p<=u;p++)a[h][p]=0==p&&h==n?c:x(c.clone().lerp(l,p/u))}for(h=0;h<n;h++)for(p=0;p<2*(n-h)-1;p++){var d=Math.floor(p/2);p%2==0?w(a[h][d+1],a[h+1][d],a[h][d]):w(a[h][d+1],a[h+1][d+1],a[h+1][d])}}function b(t){return Math.atan2(t.z,-t.x)}function R(t,e,n){return n<0&&1===t.x&&(t=new THREE.Vector2(t.x-1,t.y)),0===e.x&&0===e.z&&(t=new THREE.Vector2(n/2/Math.PI+.5,t.y)),t.clone()}this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,n)},THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype)),void 0===THREE.OctahedronGeometry&&(THREE.OctahedronGeometry=function(t,e){this.parameters={radius:t,detail:e};THREE.PolyhedronGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}},THREE.OctahedronGeometry.prototype=Object.create(THREE.Geometry.prototype)),void 0===THREE.TorusGeometry&&(THREE.TorusGeometry=function(t,e,n,i,o){THREE.Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:o},t=t||100,e=e||40,n=n||8,i=i||6,o=o||2*Math.PI;for(var r=new THREE.Vector3,s=[],a=[],h=0;h<=n;h++)for(var c=0;c<=i;c++){var l=c/i*o,u=h/n*Math.PI*2;r.x=t*Math.cos(l),r.y=t*Math.sin(l);var p=new THREE.Vector3;p.x=(t+e*Math.cos(u))*Math.cos(l),p.y=(t+e*Math.cos(u))*Math.sin(l),p.z=e*Math.sin(u),this.vertices.push(p),s.push(new THREE.Vector2(c/i,h/n)),a.push(p.clone().sub(r).normalize())}for(h=1;h<=n;h++)for(c=1;c<=i;c++){var d=(i+1)*h+c-1,f=(i+1)*(h-1)+c-1,y=(i+1)*(h-1)+c,E=(i+1)*h+c,v=new THREE.Face3(d,f,E,[a[d].clone(),a[f].clone(),a[E].clone()]);this.faces.push(v),this.faceVertexUvs[0].push([s[d].clone(),s[f].clone(),s[E].clone()]),v=new THREE.Face3(f,y,E,[a[f].clone(),a[y].clone(),a[E].clone()]),this.faces.push(v),this.faceVertexUvs[0].push([s[f].clone(),s[y].clone(),s[E].clone()])}this.computeFaceNormals()},THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype));var n,i,o,r=function(t,e,n){var i=new THREE.Geometry;n=n||1;for(var o=0;o<=64*n;++o)"x"==e&&i.vertices.push(new THREE.Vector3(0,Math.cos(o/32*Math.PI),Math.sin(o/32*Math.PI)).multiplyScalar(t)),"y"==e&&i.vertices.push(new THREE.Vector3(Math.cos(o/32*Math.PI),0,Math.sin(o/32*Math.PI)).multiplyScalar(t)),"z"==e&&i.vertices.push(new THREE.Vector3(Math.sin(o/32*Math.PI),Math.cos(o/32*Math.PI),0).multiplyScalar(t));return i},s=function(t,e,n,i,o,r){var s=new THREE.Geometry,a=new THREE.Mesh(new THREE.CylinderGeometry(t,e,n,i,o,r));return a.position.y=.5,a.updateMatrix(),s.merge(a.geometry,a.matrix),s},a=function(t){var e=new THREE.Geometry;return"X"===t?e.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(1,0,0)):"Y"===t?e.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,1,0)):"Z"===t&&e.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,1)),e};THREE.TransformGizmo=function(){var t=this;this.init=function(){THREE.Object3D.call(this),this.handles=new THREE.Object3D,this.pickers=new THREE.Object3D,this.planes=new THREE.Object3D,this.highlights=new THREE.Object3D,this.hemiPicker=new THREE.Object3D,this.subPickers=new THREE.Object3D,this.add(this.handles),this.add(this.pickers),this.add(this.planes),this.add(this.highlights),this.add(this.hemiPicker),this.add(this.subPickers);var t=new THREE.PlaneBufferGeometry(50,50,2,2),e=new THREE.MeshBasicMaterial({wireframe:!0});e.side=THREE.DoubleSide;var n={XY:new THREE.Mesh(t,e),YZ:new THREE.Mesh(t,e),XZ:new THREE.Mesh(t,e),XYZE:new THREE.Mesh(t,e)};for(var i in this.activePlane=n.XYZE,n.YZ.rotation.set(0,Math.PI/2,0),n.XZ.rotation.set(-Math.PI/2,0,0),n)n[i].name=i,this.planes.add(n[i]),this.planes[i]=n[i],n[i].visible=!1;this.setupGizmos(),this.activeMode="",this.traverse(function(t){if(t instanceof THREE.Mesh){t.updateMatrix();var e=new THREE.Geometry;t.geometry instanceof THREE.BufferGeometry&&(t.geometry=(new THREE.Geometry).fromBufferGeometry(t.geometry)),e.merge(t.geometry,t.matrix),t.geometry=e,t.position.set(0,0,0),t.rotation.set(0,0,0),t.scale.set(1,1,1)}})},this.hide=function(){this.traverse(function(t){t.visible=!1})},this.show=function(){this.traverse(function(e){e.visible=!0,e.parent!=t.pickers&&e.parent!=t.hemiPicker||(e.visible=!1),e.parent==t.planes&&(e.visible=!1)}),this.activePlane.visible=!1},this.highlight=function(t){this.traverse(function(e){e.material&&e.material.highlight&&(e.name==t?e.material.highlight(!0):e.material.highlight(!1))})},this.setupGizmos=function(){var t=function(t,e){for(var n in t)for(var i=t[n].length;i--;){var o=t[n][i][0],r=t[n][i][1],s=t[n][i][2],a=t[n][i][3];o.name=n,r&&o.position.set(r[0],r[1],r[2]),s&&o.rotation.set(s[0],s[1],s[2]),a&&(o.visble=a),e.add(o)}};this.setHandlePickerGizmos(),t(this.handleGizmos,this.handles),t(this.pickerGizmos,this.pickers),t(this.highlightGizmos,this.highlights),t(this.hemiPickerGizmos,this.hemiPicker),t(this.subPickerGizmos,this.subPickers),this.hide(),this.show()}},THREE.TransformGizmo.prototype=Object.create(THREE.Object3D.prototype),THREE.TransformGizmo.prototype.update=function(t,e){var n=new THREE.Vector3(0,0,0),i=new THREE.Vector3(0,1,0),o=new THREE.Matrix4;this.traverse(function(r){r.name&&(-1!=r.name.search("E")?r.quaternion.setFromRotationMatrix(o.lookAt(e,n,i)):-1==r.name.search("X")&&-1==r.name.search("Y")&&-1==r.name.search("Z")||r.quaternion.setFromEuler(t))})},THREE.TransformGizmoTranslate=function(){THREE.TransformGizmo.call(this),this.setHandlePickerGizmos=function(){var n=s(0,.05,.2,12,1,!1),i=a("X"),o=a("Y"),r=a("Z");this.handleGizmos={X:[[new THREE.Mesh(n,new t({color:15805484})),[.5,0,0],[0,0,-Math.PI/2]],[new THREE.Line(i,new e({color:15805484}))]],Y:[[new THREE.Mesh(n,new t({color:768011})),[0,.5,0]],[new THREE.Line(o,new e({color:768011}))]],Z:[[new THREE.Mesh(n,new t({color:2895089})),[0,0,.5],[Math.PI/2,0,0]],[new THREE.Line(r,new e({color:2895089}))]],XYZ:[[new THREE.Mesh(new THREE.OctahedronGeometry(.1,0),new t({color:16777215,opacity:.25})),[0,0,0],[0,0,0]]],XY:[[new THREE.Mesh(new THREE.PlaneBufferGeometry(.29,.29),new t({color:16776960,opacity:.25})),[.15,.15,0]]],YZ:[[new THREE.Mesh(new THREE.PlaneBufferGeometry(.29,.29),new t({color:65535,opacity:.25})),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new THREE.Mesh(new THREE.PlaneBufferGeometry(.29,.29),new t({color:16711935,opacity:.25})),[.15,0,.15],[-Math.PI/2,0,0]]]},this.pickerGizmos={X:[[new THREE.Mesh(new THREE.CylinderGeometry(.2,0,1,4,1,!1),new t({color:16711680,opacity:.25})),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new THREE.Mesh(new THREE.CylinderGeometry(.2,0,1,4,1,!1),new t({color:65280,opacity:.25})),[0,.6,0]]],Z:[[new THREE.Mesh(new THREE.CylinderGeometry(.2,0,1,4,1,!1),new t({color:255,opacity:.25})),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new THREE.Mesh(new THREE.OctahedronGeometry(.2,0),new t({color:16777215,opacity:.25}))]],XY:[[new THREE.Mesh(new THREE.PlaneBufferGeometry(.4,.4),new t({color:16776960,opacity:.25})),[.2,.2,0]]],YZ:[[new THREE.Mesh(new THREE.PlaneBufferGeometry(.4,.4),new t({color:65535,opacity:.25})),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new THREE.Mesh(new THREE.PlaneBufferGeometry(.4,.4),new t({color:16711935,opacity:.25})),[.2,0,.2],[-Math.PI/2,0,0]]]},this.hemiPickerGizmos={XYZ:[[new THREE.Mesh(new THREE.BoxGeometry(1.2,1.2,1.2),new t({color:255})),[.5,.5,.5],null,!1]]}},this.setActivePlane=function(t,e){var n=new THREE.Matrix4;e.applyMatrix4(n.getInverse(n.extractRotation(this.planes.XY.matrixWorld))),"X"==t&&(this.activePlane=this.planes.XY,Math.abs(e.y)>Math.abs(e.z)&&(this.activePlane=this.planes.XZ)),"Y"==t&&(this.activePlane=this.planes.XY,Math.abs(e.x)>Math.abs(e.z)&&(this.activePlane=this.planes.YZ)),"Z"==t&&(this.activePlane=this.planes.XZ,Math.abs(e.x)>Math.abs(e.y)&&(this.activePlane=this.planes.YZ)),"XYZ"==t&&(this.activePlane=this.planes.XYZE),"XY"==t&&(this.activePlane=this.planes.XY),"YZ"==t&&(this.activePlane=this.planes.YZ),"XZ"==t&&(this.activePlane=this.planes.XZ),this.hide(),this.show()},this.init()},THREE.TransformGizmoTranslate.prototype=Object.create(THREE.TransformGizmo.prototype),THREE.TransformGizmoRotate=function(){THREE.TransformGizmo.call(this),this.setHandlePickerGizmos=function(){this.handleGizmos={RX:[[new THREE.Line(r(1,"x",.5),new e({color:16711680}))]],RY:[[new THREE.Line(r(1,"y",.5),new e({color:65280}))]],RZ:[[new THREE.Line(r(1,"z",.5),new e({color:255}))]],RE:[[new THREE.Line(r(1.25,"z",1),new e({color:65535}))]],RXYZE:[[new THREE.Line(r(1,"z",1),new e({color:16711935}))]]},this.pickerGizmos={RX:[[new THREE.Mesh(new THREE.TorusGeometry(1,.12,4,12,Math.PI),new t({color:16711680,opacity:.25})),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],RY:[[new THREE.Mesh(new THREE.TorusGeometry(1,.12,4,12,Math.PI),new t({color:65280,opacity:.25})),[0,0,0],[Math.PI/2,0,0]]],RZ:[[new THREE.Mesh(new THREE.TorusGeometry(1,.12,4,12,Math.PI),new t({color:255,opacity:.25})),[0,0,0],[0,0,-Math.PI/2]]],RE:[[new THREE.Mesh(new THREE.TorusGeometry(1.25,.12,2,24),new t({color:65535,opacity:.25}))]],RXYZE:[[new THREE.Mesh(new THREE.TorusGeometry(1,.12,2,24),new t({color:16711935,opacity:.25}))]]}},this.setActivePlane=function(t){"RE"==t&&(this.activePlane=this.planes.XYZE),"RX"==t&&(this.activePlane=this.planes.YZ),"RY"==t&&(this.activePlane=this.planes.XZ),"RZ"==t&&(this.activePlane=this.planes.XY),this.hide(),this.show()},this.update=function(t,e){THREE.TransformGizmo.prototype.update.apply(this,arguments);var n=new THREE.Matrix4,i=new THREE.Euler(0,0,1),o=new THREE.Quaternion,r=new THREE.Vector3(1,0,0),s=new THREE.Vector3(0,1,0),a=new THREE.Vector3(0,0,1),h=new THREE.Quaternion,c=new THREE.Quaternion,l=new THREE.Quaternion,u=e.clone();i.copy(this.planes.XY.rotation),o.setFromEuler(i),n.makeRotationFromQuaternion(o).getInverse(n),u.applyMatrix4(n),this.traverse(function(t){o.setFromEuler(i),"RX"==t.name&&(h.setFromAxisAngle(r,Math.atan2(-u.y,u.z)),o.multiplyQuaternions(o,h),t.quaternion.copy(o)),"RY"==t.name&&(c.setFromAxisAngle(s,Math.atan2(u.x,u.z)),o.multiplyQuaternions(o,c),t.quaternion.copy(o)),"RZ"==t.name&&(l.setFromAxisAngle(a,Math.atan2(u.y,u.x)),o.multiplyQuaternions(o,l),t.quaternion.copy(o))})},this.init()},THREE.TransformGizmoRotate.prototype=Object.create(THREE.TransformGizmo.prototype),THREE.TransformGizmoTranslateRotate=function(){THREE.TransformGizmo.call(this);var e=this;this.setHandlePickerGizmos=function(){var e=s(0,.05,.2,12,1,!1);(new THREE.Geometry).vertices.push(new THREE.Vector3(0,0,-.1),new THREE.Vector3(0,0,.1),new THREE.Vector3(-.1,0,0),new THREE.Vector3(.1,0,0));this.handleGizmos={Z:[[new THREE.Mesh(e,new t({color:16777215})),[0,0,.25],[Math.PI/2,0,0]],[new THREE.Mesh(new THREE.CylinderGeometry(.015,.015,.6,4,1,!1),new t({color:16777215})),[0,0,.5],[Math.PI/2,0,0]]],RX:[[new THREE.Mesh(new THREE.TorusGeometry(1,.015,12,60,.3*Math.PI),new t({color:16711680})),[0,0,0],[.15*Math.PI,-Math.PI/2,0]],[new THREE.Mesh(new THREE.CylinderGeometry(.05,.05,.015,60,1,!1),new t({color:16711680})),[0,0,1],[Math.PI/2,0,0]]],RY:[[new THREE.Mesh(new THREE.TorusGeometry(1,.015,12,60,.3*Math.PI),new t({color:255})),[0,0,0],[Math.PI/2,0,.35*Math.PI]],[new THREE.Mesh(new THREE.CylinderGeometry(.05,.05,.01,60,1,!1),new t({color:255})),[0,0,1]]]},this.pickerGizmos={Z:[[new THREE.Mesh(new THREE.CylinderGeometry(.12,.12,.65,4,1,!1),new t({color:255,opacity:.25})),[0,0,.5],[Math.PI/2,0,0]]],RX:[[new THREE.Mesh(new THREE.TorusGeometry(1,.12,4,12,.3*Math.PI),new t({color:16711680,opacity:.25})),[0,0,0],[.15*Math.PI,-Math.PI/2,0]]],RY:[[new THREE.Mesh(new THREE.TorusGeometry(1,.12,4,12,.3*Math.PI),new t({color:255,opacity:.25})),[0,0,0],[Math.PI/2,0,.35*Math.PI]]]},this.subPickerGizmos={Z:[[new THREE.Mesh(new THREE.CylinderGeometry(.12,.12,.65,4,1,!1),new t({color:255,opacity:.25})),[0,0,.5],[Math.PI/2,0,0]]]},this.highlightGizmos={Z:[],RX:[[new THREE.Mesh(new THREE.TorusGeometry(1,.02,12,60,2*Math.PI),new t({color:16711680,opacity:1})),[0,0,0],[0,-Math.PI/2,-Math.PI/2],!1]],RY:[[new THREE.Mesh(new THREE.TorusGeometry(1,.02,12,60,2*Math.PI),new t({color:255,opacity:1})),[0,0,0],[Math.PI/2,0,0],!1]]},this.hemiPickerGizmos={XYZ:[[new THREE.Mesh(new THREE.SphereGeometry(1.2,8,8,0,Math.PI),new t({color:255})),null,null,!1]]}},this.setActivePlane=function(t,e){if("translate"==this.activeMode){var n=new THREE.Matrix4;e.applyMatrix4(n.getInverse(n.extractRotation(this.planes.XY.matrixWorld))),"X"==t&&(this.activePlane=this.planes.XY,Math.abs(e.y)>Math.abs(e.z)&&(this.activePlane=this.planes.XZ)),"Y"==t&&(this.activePlane=this.planes.XY,Math.abs(e.x)>Math.abs(e.z)&&(this.activePlane=this.planes.YZ)),"Z"==t&&(this.activePlane=this.planes.XZ,Math.abs(e.x)>Math.abs(e.y)&&(this.activePlane=this.planes.YZ))}else"rotate"==this.activeMode&&("RX"==t&&(this.activePlane=this.planes.YZ),"RY"==t&&(this.activePlane=this.planes.XZ),"RZ"==t&&(this.activePlane=this.planes.XY));this.hide(),this.show()},this.update=function(t,e){if("translate"==this.activeMode)THREE.TransformGizmo.prototype.update.apply(this,arguments);else if("rotate"==this.activeMode){THREE.TransformGizmo.prototype.update.apply(this,arguments);var n=new THREE.Matrix4,i=new THREE.Euler(0,0,1),o=new THREE.Quaternion,r=new THREE.Vector3(1,0,0),s=new THREE.Vector3(0,1,0),a=new THREE.Vector3(0,0,1),h=new THREE.Quaternion,c=new THREE.Quaternion,l=new THREE.Quaternion,u=e.clone();i.copy(this.planes.XY.rotation),o.setFromEuler(i),n.makeRotationFromQuaternion(o).getInverse(n),u.applyMatrix4(n),this.traverse(function(t){o.setFromEuler(i),"RX"==t.name&&(h.setFromAxisAngle(r,Math.atan2(-u.y,u.z)),o.multiplyQuaternions(o,h),t.quaternion.copy(o)),"RY"==t.name&&(c.setFromAxisAngle(s,Math.atan2(u.x,u.z)),o.multiplyQuaternions(o,c),t.quaternion.copy(o)),"RZ"==t.name&&(l.setFromAxisAngle(a,Math.atan2(u.y,u.x)),o.multiplyQuaternions(o,l),t.quaternion.copy(o))})}},this.show=function(){this.traverse(function(t){(null==e.parent||e.parent.useAllPickers||t.parent!=e.handles)&&(t.visible=!0),t.material&&(t.material.opacity=t.material.oldOpacity),t.parent!=e.pickers&&t.parent!=e.hemiPicker&&t.parent!=e.subPickers||(t.visible=!1),t.parent!=e.planes&&t.parent!=e.highlights||(t.visible=!1)}),this.activePlane.visible=!1},this.highlight=function(t){this.traverse(function(n){n.material&&n.material.highlight&&(n.name==t?(n.parent!=e.highlights&&n.parent!=e.handles||(n.visible=!0),n.material.highlight(!0)):(n.material.highlight(!1),n.material.opacity=.1))})},this.init()},THREE.TransformGizmoTranslateRotate.prototype=Object.create(THREE.TransformGizmo.prototype),THREE.TransformGizmoScale=function(){THREE.TransformGizmo.call(this),this.setHandlePickerGizmos=function(){var n=s(.125,.125,.125),i=a("X"),o=a("Y"),r=a("Z");this.handleGizmos={X:[[new THREE.Mesh(n,new t({color:16711680})),[.5,0,0],[0,0,-Math.PI/2]],[new THREE.Line(i,new e({color:16711680}))]],Y:[[new THREE.Mesh(n,new t({color:65280})),[0,.5,0]],[new THREE.Line(o,new e({color:65280}))]],Z:[[new THREE.Mesh(n,new t({color:255})),[0,0,.5],[Math.PI/2,0,0]],[new THREE.Line(r,new e({color:255}))]],XYZ:[[new THREE.Mesh(new THREE.BoxGeometry(.125,.125,.125),new t({color:16777215,opacity:.25}))]]},this.pickerGizmos={X:[[new THREE.Mesh(new THREE.CylinderGeometry(.2,0,1,4,1,!1),new t({color:16711680,opacity:.25})),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new THREE.Mesh(new THREE.CylinderGeometry(.2,0,1,4,1,!1),new t({color:65280,opacity:.25})),[0,.6,0]]],Z:[[new THREE.Mesh(new THREE.CylinderGeometry(.2,0,1,4,1,!1),new t({color:255,opacity:.25})),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new THREE.Mesh(new THREE.BoxGeometry(.4,.4,.4),new t({color:16777215,opacity:.25}))]]}},this.setActivePlane=function(t,e){var n=new THREE.Matrix4;e.applyMatrix4(n.getInverse(n.extractRotation(this.planes.XY.matrixWorld))),"X"==t&&(this.activePlane=this.planes.XY,Math.abs(e.y)>Math.abs(e.z)&&(this.activePlane=this.planes.XZ)),"Y"==t&&(this.activePlane=this.planes.XY,Math.abs(e.x)>Math.abs(e.z)&&(this.activePlane=this.planes.YZ)),"Z"==t&&(this.activePlane=this.planes.XZ,Math.abs(e.x)>Math.abs(e.y)&&(this.activePlane=this.planes.YZ)),"XYZ"==t&&(this.activePlane=this.planes.XYZE),this.hide(),this.show()},this.init()},THREE.TransformGizmoScale.prototype=Object.create(THREE.TransformGizmo.prototype),THREE.TransformControls=function(t,e,n){switch(THREE.Object3D.call(this),e=void 0!==e?e:document,this.gizmo={},n){case"translate":this.gizmo[n]=new THREE.TransformGizmoTranslate;break;case"rotate":this.gizmo[n]=new THREE.TransformGizmoRotate;break;case"transrotate":this.gizmo[n]=new THREE.TransformGizmoTranslateRotate;break;case"scale":this.gizmo[n]=new THREE.TransformGizmoScale}if(this.add(this.gizmo[n]),this.gizmo[n].hide(),this.object=void 0,this.snap=null,this.snapDelta=0,this.space="world",this.size=1,this.axis=null,this.useAllPickers=!0,this.unitX=new THREE.Vector3(1,0,0),this.unitY=new THREE.Vector3(0,1,0),this.unitZ=new THREE.Vector3(0,0,1),this.normal=new THREE.Vector3(0,0,1),"transrotate"===n){(o=new THREE.Geometry).vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,1));var i=new THREE.LineBasicMaterial({color:0,linewidth:2,depthTest:!1});this.startLine=new THREE.Line(o,i);var o=new THREE.Geometry;i=new THREE.LineBasicMaterial({color:16770563,linewidth:2,depthTest:!1});o.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,1)),this.endLine=new THREE.Line(o,i);o=new THREE.Geometry,i=new THREE.LineDashedMaterial({color:0,linewidth:1,depthTest:!1});o.vertices.push(new THREE.Vector3(0,-1,0),new THREE.Vector3(0,1,0)),this.centerLine=new THREE.Line(o,i),(r=THREE.ImageUtils.loadTexture(Autodesk.Viewing.Private.getResourceUrl("res/textures/centerMarker_X.png"))).magFilter=r.minFilter=THREE.NearestFilter;var r;o=new THREE.CircleGeometry(.1,32),i=new THREE.MeshBasicMaterial({opacity:1,side:THREE.DoubleSide,transparent:!0,map:r});this.centerMark=new THREE.Mesh(o,i),this.centerMark.rotation.set(Math.PI/2,0,0),this.ticks={},(r=THREE.ImageUtils.loadTexture(Autodesk.Viewing.Private.getResourceUrl("res/textures/cardinalPoint.png"))).magFilter=r.minFilter=THREE.NearestFilter;i=new THREE.MeshBasicMaterial({depthTest:!1,opacity:1,transparent:!0,side:THREE.DoubleSide,map:r});var s=.25;this.ticks.RX=new THREE.Object3D;o=new THREE.PlaneBufferGeometry(.12,s);var a=new THREE.Mesh(o,i);a.position.set(0,0,-1.275),a.rotation.set(Math.PI/2,Math.PI/2,0),this.ticks.RX.add(a),(a=a.clone()).position.set(0,1.275,0),a.rotation.set(0,Math.PI/2,0),this.ticks.RX.add(a),(a=a.clone()).position.set(0,0,1.275),a.rotation.set(0,Math.PI/2,Math.PI/2),this.ticks.RX.add(a),(a=a.clone()).position.set(0,-1.275,0),a.rotation.set(0,Math.PI/2,0),this.ticks.RX.add(a),this.ticks.RY=new THREE.Object3D,(a=a.clone()).position.set(0,0,-1.275),a.rotation.set(Math.PI/2,0,0),this.ticks.RY.add(a),(a=a.clone()).position.set(-1.275,0,0),a.rotation.set(Math.PI/2,0,Math.PI/2),this.ticks.RY.add(a),(a=a.clone()).position.set(0,0,1.275),a.rotation.set(Math.PI/2,0,0),this.ticks.RY.add(a),(a=a.clone()).position.set(1.275,0,0),a.rotation.set(Math.PI/2,0,Math.PI/2),this.ticks.RY.add(a)}var h=this,c=!1,l=n,u={type:"change"},p={type:"mouseDown"},d={type:"mouseUp",mode:l},f={type:"objectChange"},y=(new THREE.Raycaster,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3),E=new THREE.Vector3,v=new THREE.Vector3,g=new THREE.Vector3,m=1;this.clientScale=1;var x=new THREE.Matrix4,w=new THREE.Vector3,T=new THREE.Matrix4,b=new THREE.Vector3,R=new THREE.Quaternion,H=new THREE.Vector3,M=new THREE.Vector3,P=new THREE.Vector3,_=new THREE.Quaternion,C=new THREE.Quaternion,I=new THREE.Quaternion,k=new THREE.Quaternion,S=new THREE.Quaternion,V=new THREE.Vector3,z=new THREE.Vector3,A=new THREE.Matrix4,B=new THREE.Matrix4,O=new THREE.Vector3,G=new THREE.Vector3,j=new THREE.Euler,L=new THREE.Matrix4,X=new THREE.Vector3;new THREE.Euler;function Y(e,n){return THREE.TransformControls.intersectObjects(e.canvasX,e.canvasY,n,t,!0)}this.attach=function(t){h.object=t,this.gizmo[l].show(),h.update(),h.updateUnitVectors()},this.detach=function(t){h.object=void 0,this.axis=null,this.gizmo[l].hide()},this.setMode=function(t){"scale"==(l=t||l)&&(h.space="local"),this.gizmo[l].show(),this.update(),h.dispatchEvent(u)},this.getPicker=function(){return h.gizmo[l].hemiPicker.children},this.setPosition=function(t){this.object.position.copy(t),this.update()},this.setNormal=function(t){R.setFromUnitVectors(this.normal,t),this.unitX.applyQuaternion(R),this.unitY.applyQuaternion(R),this.unitZ.applyQuaternion(R),this.normal.copy(t),this.object&&this.object.quaternion.multiply(R),this.update()},this.setSnap=function(t,e){h.snap=t,h.snapDelta=e},this.setSize=function(t){h.size=t,this.update(),h.dispatchEvent(u)},this.setSpace=function(t){h.space=t,this.update(),h.dispatchEvent(u)},this.update=function(n){if(void 0!==h.object){var i;if(h.object.updateMatrixWorld(),G.setFromMatrixPosition(h.object.matrixWorld),j.setFromRotationMatrix(T.extractRotation(h.object.matrixWorld)),t.updateMatrixWorld(),X.setFromMatrixPosition(t.matrixWorld),this.position.copy(G),this.quaternion.setFromEuler(j),this.normal.set(0,0,1),this.normal.applyEuler(j),t.isPerspective){var o=G.distanceTo(X);i=2*Math.tan(t.fov*Math.PI/360)*o}else i=t.top-t.bottom;var r=e.getBoundingClientRect();m=100*this.clientScale*i/r.height,this.scale.set(m,m,m),n&&this.gizmo[l].highlight(h.axis)}},this.updateUnitVectors=function(){this.unitX.set(1,0,0),this.unitY.set(0,1,0),this.unitZ.set(0,0,1),this.unitX.applyEuler(j),this.unitY.applyEuler(j),this.unitZ.applyEuler(j)},this.showRotationGizmos=function(t){for(var e=this.gizmo[l].handles.children,n=0;n<e.length;n++){var i=e[n];i.visible=!0,-1!==i.name.search("R")&&(i.visible=t)}this.useAllPickers=t},this.highlight=function(){this.gizmo[l].highlight(this.axis||"Z")},this.onPointerHover=function(t){if(void 0===h.object||!0===c)return!1;var e=Y(t,h.useAllPickers?h.gizmo[l].pickers.children:h.gizmo[l].subPickers.children),n=null,i="";return e&&(i=-1!=(n=e.object.name).search("R")?"rotate":"translate"),h.axis!==n&&(h.axis=n,h.gizmo[l].activeMode=i,h.update(!0),h.dispatchEvent(u)),null===h.axis&&h.gizmo[l].show(),!!e},this.onPointerDown=function(e){if(void 0===h.object||!0===c)return!1;var n=e;if("touch"===e.pointerType){var i=null,o="";(r=Y(n,h.useAllPickers?h.gizmo[l].pickers.children:h.gizmo[l].subPickers.children))&&(o=-1!=(i=r.object.name).search("R")?"rotate":"translate"),h.axis!==i&&(h.axis=i,h.gizmo[l].activeMode=o)}var r=null;if((0===n.button||-1===n.button||void 0===n.button)&&(r=Y(n,h.useAllPickers?h.gizmo[l].pickers.children:h.gizmo[l].subPickers.children))){h.dispatchEvent(p),h.axis=r.object.name,h.update(),w.copy(t.position).sub(G).normalize(),h.gizmo[l].setActivePlane(h.axis,w);var s=Y(n,[h.gizmo[l].activePlane]);if(s&&E.copy(s.point),V.copy(h.object.position),z.copy(h.object.scale),A.extractRotation(h.object.matrix),L.extractRotation(h.object.matrixWorld),h.object.parent?(B.extractRotation(h.object.parent.matrixWorld),O.setFromMatrixScale(T.getInverse(h.object.parent.matrixWorld))):(B.extractRotation(h.object.matrixWorld),O.setFromMatrixScale(T.getInverse(h.object.matrixWorld))),"transrotate"===l&&"rotate"===h.gizmo[l].activeMode){h.startLine.geometry.vertices[0].set(0,0,0).applyMatrix4(h.matrixWorld),h.startLine.geometry.vertices[1].set(0,0,1).applyMatrix4(h.matrixWorld),h.startLine.geometry.verticesNeedUpdate=!0,h.parent.add(h.startLine);var a=h.object.geometry.getAttribute("position"),u=(new THREE.Vector3).fromAttribute(a,0).applyMatrix4(h.object.matrixWorld),d=(new THREE.Vector3).fromAttribute(a,1).applyMatrix4(h.object.matrixWorld),f=(new THREE.Vector3).fromAttribute(a,2).applyMatrix4(h.object.matrixWorld),y=(new THREE.Vector3).fromAttribute(a,3).applyMatrix4(h.object.matrixWorld);if("RX"===h.axis){u.lerp(f,.5),d.lerp(y,.5);var v=u.distanceTo(d);h.centerLine.material.dashSize=v/15,h.centerLine.material.gapSize=v/30,h.centerLine.geometry.vertices[0].copy(u),h.centerLine.geometry.vertices[1].copy(d)}else{u.lerp(d,.5),f.lerp(y,.5);v=u.distanceTo(f);h.centerLine.material.dashSize=v/15,h.centerLine.material.gapSize=v/30,h.centerLine.geometry.vertices[0].copy(u),h.centerLine.geometry.vertices[1].copy(f)}h.centerLine.geometry.computeLineDistances(),h.centerLine.geometry.verticesNeedUpdate=!0,h.parent.add(h.centerLine),h.ticks[h.axis].position.copy(h.position),h.ticks[h.axis].quaternion.copy(h.quaternion),h.ticks[h.axis].scale.copy(h.scale),h.parent.add(h.ticks[h.axis])}}return c=!0,!!r},this.onPointerMove=function(t){if(void 0===h.object||null===h.axis||!1===c)return!1;var e=Y(t,[h.gizmo[l].activePlane]);e&&y.copy(e.point);var n=h.gizmo[l].activeMode;if("translate"==n)y.sub(E),y.multiply(O),"local"==h.space&&(y.applyMatrix4(T.getInverse(L)),H.copy(this.unitX),M.copy(this.unitY),P.copy(this.unitZ),b.set(0,0,0),-1!=h.axis.search("X")&&(H.multiplyScalar(y.dot(this.unitX)),b.add(H)),-1!=h.axis.search("Y")&&(M.multiplyScalar(y.dot(this.unitY)),b.add(M)),-1!=h.axis.search("Z")&&(P.multiplyScalar(y.dot(this.unitZ)),b.add(P)),y.copy(b),y.applyMatrix4(A),h.object.position.copy(V),h.object.position.add(y)),"world"!=h.space&&-1==h.axis.search("XYZ")||(H.copy(this.unitX),M.copy(this.unitY),P.copy(this.unitZ),b.set(0,0,0),-1!=h.axis.search("X")&&(H.multiplyScalar(y.dot(this.unitX)),b.add(H)),-1!=h.axis.search("Y")&&(M.multiplyScalar(y.dot(this.unitY)),b.add(M)),-1!=h.axis.search("Z")&&(P.multiplyScalar(y.dot(this.unitZ)),b.add(P)),y.copy(b),y.applyMatrix4(T.getInverse(B)),h.object.position.copy(V),h.object.position.add(y));else if("scale"==n)y.sub(E),y.multiply(O),"local"==h.space&&("XYZ"==h.axis?(m=1+y.y/50,h.object.scale.x=z.x*m,h.object.scale.y=z.y*m,h.object.scale.z=z.z*m):(y.applyMatrix4(T.getInverse(L)),"X"==h.axis&&(h.object.scale.x=z.x*(1+y.x/50)),"Y"==h.axis&&(h.object.scale.y=z.y*(1+y.y/50)),"Z"==h.axis&&(h.object.scale.z=z.z*(1+y.z/50))));else if("rotate"==n){if(y.sub(G),y.multiply(O),b.copy(E).sub(G),b.multiply(O),"RE"==h.axis){y.applyMatrix4(T.getInverse(x)),b.applyMatrix4(T.getInverse(x)),v.set(Math.atan2(y.z,y.y),Math.atan2(y.x,y.z),Math.atan2(y.y,y.x)),g.set(Math.atan2(b.z,b.y),Math.atan2(b.x,b.z),Math.atan2(b.y,b.x)),R.setFromRotationMatrix(T.getInverse(B));var i=v.z-g.z;if(null!==h.snap){var o=Math.round(i/h.snap)*h.snap;Math.abs(o-i)<h.snapDelta&&(i=o)}S.setFromAxisAngle(w,i),_.setFromRotationMatrix(L),R.multiplyQuaternions(R,S),R.multiplyQuaternions(R,_),h.object.quaternion.copy(R)}else if("RXYZE"==h.axis){var r=y.clone().cross(b).normalize();R.setFromRotationMatrix(T.getInverse(B));var s=-y.clone().angleTo(b);if(null!==h.snap){o=Math.round(s/h.snap)*h.snap;Math.abs(o-s)<h.snapDelta&&(s=o)}C.setFromAxisAngle(r,s),_.setFromRotationMatrix(L),R.multiplyQuaternions(R,C),R.multiplyQuaternions(R,_),h.object.quaternion.copy(R)}else if("local"==h.space){y.applyMatrix4(T.getInverse(L)),b.applyMatrix4(T.getInverse(L));var a=y.dot(this.unitX),p=y.dot(this.unitY),d=y.dot(this.unitZ),j=b.dot(this.unitX),X=b.dot(this.unitY),W=b.dot(this.unitZ);v.set(Math.atan2(d,p),Math.atan2(a,d),Math.atan2(p,a)),g.set(Math.atan2(W,X),Math.atan2(j,W),Math.atan2(X,j));var N=v.x-g.x,Z=v.y-g.y;i=v.z-g.z;if(null!==h.snap){if(-1!=h.axis.search("X")){o=Math.round(N/h.snap)*h.snap;Math.abs(o-N)<h.snapDelta&&(N=o)}if(-1!=h.axis.search("Y")){o=Math.round(Z/h.snap)*h.snap;Math.abs(o-Z)<h.snapDelta&&(Z=o)}if(-1!=h.axis.search("Z")){o=Math.round(i/h.snap)*h.snap;Math.abs(o-i)<h.snapDelta&&(i=o)}}C.setFromAxisAngle(this.unitX,N),I.setFromAxisAngle(this.unitY,Z),k.setFromAxisAngle(this.unitZ,i),_.setFromRotationMatrix(A),"RX"==h.axis&&_.multiplyQuaternions(_,C),"RY"==h.axis&&_.multiplyQuaternions(_,I),"RZ"==h.axis&&_.multiplyQuaternions(_,k),h.object.quaternion.copy(_)}else if("world"==h.space){a=y.dot(this.unitX),p=y.dot(this.unitY),d=y.dot(this.unitZ),j=b.dot(this.unitX),X=b.dot(this.unitY),W=b.dot(this.unitZ);v.set(Math.atan2(d,p),Math.atan2(a,d),Math.atan2(p,a)),g.set(Math.atan2(W,X),Math.atan2(j,W),Math.atan2(X,j)),R.setFromRotationMatrix(T.getInverse(B));N=v.x-g.x,Z=v.y-g.y,i=v.z-g.z;if(null!==h.snap){if(-1!=h.axis.search("X")){o=Math.round(N/h.snap)*h.snap;Math.abs(o-N)<h.snapDelta&&(N=o)}if(-1!=h.axis.search("Y")){o=Math.round(Z/h.snap)*h.snap;Math.abs(o-Z)<h.snapDelta&&(Z=o)}if(-1!=h.axis.search("Z")){o=Math.round(i/h.snap)*h.snap;Math.abs(o-i)<h.snapDelta&&(i=o)}}C.setFromAxisAngle(this.unitX,N),I.setFromAxisAngle(this.unitY,Z),k.setFromAxisAngle(this.unitZ,i),_.setFromRotationMatrix(L),"RX"==h.axis&&R.multiplyQuaternions(R,C),"RY"==h.axis&&R.multiplyQuaternions(R,I),"RZ"==h.axis&&R.multiplyQuaternions(R,k),R.multiplyQuaternions(R,_),h.object.quaternion.copy(R)}"transrotate"===l&&(h.add(h.endLine),h.add(h.centerMark))}return h.object.matrixAutoUpdate=!0,h.update(!0),h.dispatchEvent(u),h.dispatchEvent(f),!!e},this.onPointerUp=function(t){return c&&null!==h.axis&&(d.mode=l,h.dispatchEvent(d)),c=!1,this.gizmo[l].show(),this.updateUnitVectors(),"transrotate"===l&&"rotate"===this.gizmo[l].activeMode&&(this.remove(this.endLine),this.remove(this.centerMark),this.parent.remove(this.centerLine),this.parent.remove(this.startLine),this.parent.remove(this.ticks[this.axis])),!1}},THREE.TransformControls.intersectObjects=(n=new THREE.Vector3,i=new THREE.Vector3,o=new THREE.Raycaster,function(t,e,r,s,a){var h=t/s.clientWidth*2-1,c=-e/s.clientHeight*2+1;s.isPerspective?(n.set(h,c,.5),n.unproject(s),o.set(s.position,n.sub(s.position).normalize())):(n.set(h,c,-1),n.unproject(s),i.set(0,0,-1),o.set(n,i.transformDirection(s.matrixWorld)));var l=o.intersectObjects(r,a);return l[0]?l[0]:null}),THREE.TransformControls.prototype=Object.create(THREE.Object3D.prototype)}function p(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var d=null,f=function(t,e){var n,r,s=t.impl,a=["section"],h=!1,c=!1,f=!1,y=!0,E=e.tintColor,v=e.tintIntensity,g=[],m=[],x=[],w="",T="gizmo",b=null,R=!1,H=!0,M=[[0,1],[1,3],[3,2],[2,0]];function P(){s.invalidate(!1,!1,!0)}function _(){n&&n.update(),r&&r.update()}function C(){h&&1===m.length&&(A(!0),_(),k((new THREE.Plane).setComponents(m[0].x,m[0].y,m[0].z,m[0].w)))}u(),function(){if(d)return;(d=function(t,e,n){THREE.Mesh.call(this,t,e,!1),this.plane=n,this.planeVec=new THREE.Vector4(n.normal.x,n.normal.y,n.normal.z,n.constant),this.connectivity=[],this.outlines=[]}).prototype=Object.create(THREE.Mesh.prototype),d.prototype.constructor=d,d.prototype.update=function(){this.plane.normal.set(0,0,1),this.plane.normal.applyQuaternion(this.quaternion);var t=this.plane.normal,e=-1*this.getWorldPosition().dot(t);this.planeVec.set(t.x,t.y,t.z,e),this.plane.constant=e}}();var I=new function(t,e){var n,i,o,r,a,h,c,l=0,u=[],p=[];function d(t){l&&clearTimeout(l),l=0,i=t,u.length=0,p.length=0,r=null,a=-1,h=0,c=0}function f(){l=0;for(var r=performance.now()+t;performance.now()<r;){if(!v())return s.invalidate(!0,!0),void d(null);n(p[c],u[h],o,c+1>=p.length,!i||a>=i.length)}l=setTimeout(f,e)}function y(){if(i&&a<i.length)for(;++a<i.length;)if((r=i[a].getInstanceTree())&&(u.length=0,r.enumNodeChildren(i[a].getRootId(),function(t){u.push(t)},!0),u.length>0))return o=i[a];return o=null,!1}function E(){if(h>=u.length)return!1;for(;++h<u.length;){var t=u[h];if(!r.isNodeHidden(t)&&!r.isNodeOff(t)&&(p.length=0,r.enumNodeFragments(t,function(t){p.push(t)},!1),p.length>0))return!0}return!1}function v(){if(++c<p.length)return!0;for(c=0;;){if(E())return!0;if(!y())return!1;h=-1}}t=t||15,e=e||0,this.start=function(t,e,i){d(t),n=i,i&&(e>=0?l=setTimeout(f,e):f())}};function k(t){var e=s.sceneAfter.getObjectByName("section");e&&s.sceneAfter.remove(e);var n=new THREE.Object3D;n.name="section",s.sceneAfter.add(n);var r=new THREE.Object3D;n.add(r);var a=new THREE.Object3D;n.add(a);var h=Autodesk.Viewing.Private,c=Object(i.makePlaneBasis)(t),u=(new THREE.Matrix4).getInverse(c),p=s.matman().create2DMaterial(null,{skipCircles:!0,skipEllipticals:!0,isScreenSpace:!0},!1,!1),d=s.matman().findMaterial(null,p);d.transparent=!0,d.depthTest=!0,d.polygonOffset=!0,d.polygonOffsetFactor=-1,d.polygonOffsetUnits=.1,d.cutplanes=V;var f,y=new THREE.Box3,g=s.modelQueue().getModels(),m=[];I.start(g,50,function(e,n,p,g){var x=p.getFragmentList();if(x.getWorldBounds(e,y),Object(o.xBoxPlane)(t,y)){var w=x.getVizmesh(e);w.geometry&&!w.geometry.is2d&&!w.geometry.isLines&&w.material.cutplanes&&(f=w.material,Object(i.xMeshPlane)(t,w,m))}if(g){if(m.length){var T=new THREE.Box3;Object(i.convertToPlaneCoords)(c,m,T);var b=new h.VertexBufferBuilder(!1,8*m.length),R=function(t){return t&&t.color||new THREE.Color(16777215)}(f),H=0|.25*R.r*255.5,M=0|.25*R.g*255.5,P=4278190080|(0|.25*R.b*255.5)<<16|M<<8|H,_=new l(m,T,1e-6*T.size().length());_.snapEdges(),_.sanitizeEdges(),_.stitchContours();var C=_.triangulate();if(C){for(var I=0;I<C.contours.length;I++)for(var k=C.contours[I],S=1;S<k.length;S++){var z=C.pts[k[S-1]],A=C.pts[k[S]];b.addSegment(z.x,z.y,A.x,A.y,0,-2,P,n,0)}var B={mesh:b.toMesh()};h.BufferGeometryUtils.meshToGeometry(B);var O=B.geometry;O.streamingDraw=!0,O.streamingIndex=!0;var G=new THREE.Mesh(O,d);if(G.matrix.copy(u),G.matrixAutoUpdate=!1,G.frustumCulled=!1,G.modelId=p.id,G.dbId=n,a.add(G),!C.triangulationFailed){var j=C.toPolygonMesh(f.packedNormals),L=s.matman().cloneMaterial(f,p);L.packedNormals=f.packedNormals,L.cutplanes=V,L.side=THREE.FrontSide,L.depthTest=!0,L.map=null,L.bumpMap=null,L.normalMap=null,L.alphaMap=null,L.specularMap=null,L.transparent=!1,L.depthWrite=!0,L.hatchPattern=!0,L.needsUpdate=!0;var X=(f.id+2)*Math.PI*.125,Y=Math.tan(X);L.hatchParams=new THREE.Vector2(Y,10),L.hatchTintColor=E,L.hatchTintIntensity=v,null!=L.prismType&&(L.defines={},L.defines[L.prismType.toUpperCase()]="","PrismWood"==L.prismType&&(L.defines.NO_UVW=""));var W=new THREE.Mesh(j,L);W.matrix.copy(u),W.matrixAutoUpdate=!1,W.modelId=p.id,W.dbId=n,W.fragId=m.fragId,r.add(W)}}}m.length=0}})}var S="Autodesk.Viewing.Extension.Section.SectionTool";s.setCutPlaneSetFor2DRendering(S);var V=[];function z(t,e){var n,i,o=(new THREE.Quaternion).setFromUnitVectors(new THREE.Vector3(0,0,1),t.normal);if(e){var r=t.projectPoint(e.max),a=t.projectPoint(e.min),h=o.clone().inverse();r.applyQuaternion(h),a.applyQuaternion(h),i=(new THREE.Vector3).subVectors(r,a),n=new THREE.PlaneBufferGeometry(i.x,i.y)}else i=2*(e=s.getVisibleBounds()).getBoundingSphere().radius,n=new THREE.PlaneBufferGeometry(i,i);var c=new THREE.MeshBasicMaterial({opacity:0,color:16777215,side:THREE.DoubleSide,depthTest:!1,depthWrite:!1,transparent:!0}),l=new d(n,c,t),u=t.projectPoint(e.center());l.position.copy(u),l.quaternion.multiply(o);var p=s.currentLightPreset();p=Math.max(0,p);for(var f=Autodesk.Viewing.Private.LightPresets[p].bgColorGradient,y="rgb("+(255-f[0])+","+(255-f[1])+","+(255-f[2])+")",E=new THREE.LineBasicMaterial({color:y,linewidth:1,depthTest:!1}),v=l.geometry.getAttribute("position"),g=0;g<M.length;g++){(n=new THREE.Geometry).vertices.push((new THREE.Vector3).fromArray(v.array,M[g][0]*v.itemSize),(new THREE.Vector3).fromArray(v.array,M[g][1]*v.itemSize));var m=new THREE.Line(n,E);l.add(m),l.outlines.push(m)}return l}function A(t){B(function(e){var n,i,o,r;if(e instanceof d)if(e.connectivity.length>0){var a=(new THREE.Matrix4).getInverse(e.matrixWorld);for(r=new THREE.Vector3,o=e.geometry.getAttribute("position"),n=0;n<o.length/o.itemSize;n++){var h=e.connectivity[n];null!==F(e.plane,h[0],h[1],r)&&(r.applyMatrix4(a),o.setXYZ(n,r.x,r.y,r.z))}for(o.needsUpdate=!0,e.geometry.computeBoundingBox(),e.geometry.computeBoundingSphere(),n=0;n<e.outlines.length;n++)(i=e.outlines[n]).geometry.vertices[0].fromArray(o.array,M[n][0]*o.itemSize),i.geometry.vertices[1].fromArray(o.array,M[n][1]*o.itemSize),i.geometry.verticesNeedUpdate=!0}else if(t){var c=s.getVisibleBounds(),l=2*c.getBoundingSphere().radius;for(r=e.plane.projectPoint(c.center()),e.geometry=new THREE.PlaneBufferGeometry(l,l),e.position.copy(r),o=e.geometry.getAttribute("position"),n=0;n<e.outlines.length;n++)(i=e.outlines[n]).geometry.vertices[0].fromArray(o.array,M[n][0]*o.itemSize),i.geometry.vertices[1].fromArray(o.array,M[n][1]*o.itemSize),i.geometry.verticesNeedUpdate=!0}})}function B(t){for(var e=0;e<g.length;e++)g[e].traverse(t)}function O(){B(function(t){t instanceof d&&t.update()}),1===m.length&&k((new THREE.Plane).setComponents(m[0].x,m[0].y,m[0].z,m[0].w)),s.setCutPlaneSet(S,m)}function G(t){for(var e=0;e<g.length;e++)g[e].visible=t;y!==t&&P(),y=t}function j(t){t&&m.length>0&&(1===m.length&&k((new THREE.Plane).setComponents(m[0].x,m[0].y,m[0].z,m[0].w)),s.setCutPlaneSet(S,m)),G(t)}function L(t,e){t.attach(e),t.setPosition(e.position),t.visible=!0}function X(t){return s.api.navigation.getEyeVector().dot(t)>0&&t.negate(),t}function Y(t,e){var i=s.getVisibleBounds().center(),o=new THREE.Group;e=void 0!==e?e:-1*i.dot(t);var r=z(new THREE.Plane(t,e),null);o.add(r),m.push(r.planeVec),g.push(o),s.addOverlay(T,o),n&&(L(n,r),n.showRotationGizmos(!0),x=n.getPicker()),O()}var W,N,Z,D,F=(W=new THREE.Matrix3,N=new THREE.Vector3,Z=new THREE.Vector3,D=new THREE.Vector3,function(t,e,n,i){W.set(t.normal.x,t.normal.y,t.normal.z,e.normal.x,e.normal.y,e.normal.z,n.normal.x,n.normal.y,n.normal.z);var o=W.determinant();return 0===o?null:(N.crossVectors(e.normal,n.normal).multiplyScalar(-t.constant),Z.crossVectors(n.normal,t.normal).multiplyScalar(-e.constant),D.crossVectors(t.normal,e.normal).multiplyScalar(-n.constant),(i||new THREE.Vector3).copy(N).add(Z).add(D).divideScalar(o))}),U=function(t,e,n){return THREE.TransformControls.intersectObjects(t.canvasX,t.canvasY,e,s.camera,n)};this.isActive=function(){return h},this.getSectionDistance=function(t){var e=s.api.navigation.getEyeVector(),n=s.rayIntersect(new THREE.Ray(s.camera.position,e));return n&&n.intersectPoint&&-1*n.intersectPoint.dot(t)},this.setSection=function(t){var e,i;this.clearSection(),n.clientScale=1;var o=s.getCutPlaneSet("__set_view");switch(1===o.length&&"BOX"!==t&&(t="SET_VIEW_PLANE"),t){case"X":e=new THREE.Vector3(1,0,0),i=this.getSectionDistance(e),Y(X(e),i);break;case"Y":e=new THREE.Vector3(0,1,0),i=this.getSectionDistance(e),Y(X(e),i);break;case"Z":e=new THREE.Vector3(0,0,1),i=this.getSectionDistance(e),Y(X(e),i);break;case"SET_VIEW_PLANE":var a=o[0];Y(e=new THREE.Vector3(a.x,a.y,a.z),a.w);break;case"BOX":!function(t){var e=[new THREE.Vector3(1,0,0),new THREE.Vector3(0,1,0),new THREE.Vector3(0,0,1),new THREE.Vector3(-1,0,0),new THREE.Vector3(0,-1,0),new THREE.Vector3(0,0,-1)],i=[[[1,2],[1,5],[2,4],[4,5]],[[3,5],[0,5],[2,3],[0,2]],[[1,3],[0,1],[3,4],[0,4]],[[1,5],[1,2],[4,5],[2,4]],[[2,3],[0,2],[3,5],[0,5]],[[0,1],[3,1],[0,4],[3,4]]],o=new THREE.Group,a=s.getVisibleBounds(),h=a.center(),c=new THREE.Box3(a.min,h),l=!1;t&&6===t.length&&1===t[0].x&&(h=(c=new THREE.Box3(new THREE.Vector3(t[3].w,t[4].w,t[5].w),new THREE.Vector3(t[0].w,t[1].w,t[2].w))).max.clone(),l=!0);var u,p,d=[],f=[];for(u=0;u<e.length;u++){if(l){var y=new THREE.Plane(e[u],t[u].w);d.push(y)}else if(y=new THREE.Plane(e[u],-1*h.dot(e[u])),d.push(y),u>2){var E=y.orthoPoint(c.max),v=y.orthoPoint(c.min),w=(new THREE.Vector3).subVectors(E,v);y.constant-=w.length()}p=z(y,c),o.add(p),f.push(p),m.push(p.planeVec)}for(u=0;u<f.length;u++){p=f[u];for(var b=i[u],R=0;R<b.length;R++){for(var H=[],M=b[R],P=0;P<M.length;P++)H.push(d[M[P]]);p.connectivity.push(H)}}g.push(o),s.addOverlay(T,o),O(),A(),L(n,g[0].children[0]),L(r,g[0]),n.showRotationGizmos(!1),x=n.getPicker().concat(r.getPicker())}(o),n.clientScale=2,this.recomputePivot()}w=t,s.setCutPlaneSet("__set_view",void 0)},this.setSectionFromPlane=function(t){this.clearSection(),Y(new THREE.Vector3(t.x,t.y,t.z),t.w),w="",s.setCutPlaneSet("__set_view",void 0)},this.clearSection=function(){for(n&&n.detach(),r&&r.detach();m.length>0;)m.pop();for(;g.length>0;){var t=g.pop();s.removeOverlay(T,t)}I.start(null);var e=s.sceneAfter.getObjectByName("section");e&&s.sceneAfter.remove(e),s.setCutPlaneSet(S)},this.isPlaneOn=function(){return y},this.showPlane=function(t){G(t)},this.attachControl=function(t){n&&r&&(t?(L(n,g[0].children[0]),n.highlight(),"BOX"===w&&L(r,g[0])):(n.detach(),r.detach()))},this.resetSection=function(){this.setSection(w)},this.getNames=function(){return a},this.getName=function(){return a[0]},this.register=function(){},this.deregister=function(){this.clearSection(),R&&(s.removeOverlay(T,n),n.removeEventListener("change",P),n=null,s.removeOverlay(T,r),r.removeEventListener("change",P),r=null,s.removeOverlayScene(T),t.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,_),t.removeEventListener(Autodesk.Viewing.ISOLATE_EVENT,C),t.removeEventListener(Autodesk.Viewing.HIDE_EVENT,C),t.removeEventListener(Autodesk.Viewing.SHOW_EVENT,C),R=!1)},this.getPriority=function(){return 70},this.activate=function(){R||((n=new THREE.TransformControls(s.camera,s.canvas,"transrotate")).addEventListener("change",P),n.setSnap(Math.PI/2,Math.PI/36),(r=new THREE.TransformControls(s.camera,s.canvas,"translate")).addEventListener("change",P),void 0===s.overlayScenes[T]&&s.createOverlayScene(T),s.addOverlay(T,n),s.addOverlay(T,r),t.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,_),t.addEventListener(Autodesk.Viewing.ISOLATE_EVENT,C),t.addEventListener(Autodesk.Viewing.HIDE_EVENT,C),t.addEventListener(Autodesk.Viewing.SHOW_EVENT,C),R=!0),h=!0,c=!1,H=!0,m=m||[],j(!0)},this.deactivate=function(){h=!1,c=!1,I.start(null);var t=s.sceneAfter.getObjectByName("section");t&&s.sceneAfter.remove(t),j(!1),s.setCutPlaneSet(S),n.detach(),r.detach()},this.update=function(){return!1},this.handleSingleClick=function(t){var e=U(t,g[0].children);return e&&(L(n,e.object),n.highlight(),P()),!1},this.handleDoubleClick=function(){return!1},this.handleSingleTap=function(t){return this.handleSingleClick(t,0)},this.handleDoubleTap=function(){return!1},this.handleKeyDown=function(){return!1},this.handleKeyUp=function(){return!1},this.handleWheelInput=function(){return!1},this.handleButtonDown=function(t){return c=!0,!!r.onPointerDown(t)||n.onPointerDown(t)},this.handleButtonUp=function(t){return c=!1,f&&(f=!1,this.recomputePivot()),!!r.onPointerUp(t)||n.onPointerUp(t)},this.handleMouseMove=function(t){if(c){if(r.onPointerMove(t))return f=!0,O(),n.update(),!0;if(n.onPointerMove(t))return f=!0,O(),A(),!0}if(r.visible=void 0!==r.object,"touch"!==t.pointerType){var e=t,i=U(e,g[0].children);i&&(H=!1);var o=!!(H||i||U(e,x,!0));n.visible=o,r.visible=r.visible&&o,G(o)}return!!r.onPointerHover(t)||n.onPointerHover(t)},this.handleGesture=function(t){switch(t.type){case"dragstart":return b="drag",this.handleButtonDown(t,0);case"dragmove":return"drag"===b&&this.handleMouseMove(t);case"dragend":return"drag"===b&&(b=null,this.handleButtonUp(t,0))}return!1},this.handleBlur=function(){return!1},this.handleResize=function(){},this.handlePressHold=function(){return!0},this.recomputePivot=function(){var t=this.getSectionBoxValues(!0);if(t){var e=t.sectionBox;s.api.navigation.setPivotPoint(new THREE.Vector3(e[0]+.5*(e[3]-e[0]),e[1]+.5*(e[4]-e[1]),e[2]+.5*(e[5]-e[2])))}},this.getSectionBoxValues=function(t){var e=g[0];if(!e)return null;var n=e.children;if(n.length<6)return null;var i=n[0].position.x,o=n[1].position.y,r=n[2].position.z,a=n[3].position.x,h=n[4].position.y,c=n[5].position.z,l={x:0,y:0,z:0};return t||(l=s.model.getData().globalOffset||l),{sectionBox:[Math.min(a,i)+l.x,Math.min(o,h)+l.y,Math.min(r,c)+l.z,Math.max(a,i)+l.x,Math.max(o,h)+l.y,Math.max(r,c)+l.z],sectionBoxTransform:(new THREE.Matrix4).identity().toArray()}},this.getSectionPlaneValues=function(t){var e=g[0];if(!e)return null;var n=e.children;if(1!==n.length)return null;var i={x:0,y:0,z:0};t||(i=s.model.getData().globalOffset||i);var o=n[0].plane,r=o.constant-THREE.Vector3.prototype.dot.call(i,o.normal);return{sectionPlane:[o.normal.x,o.normal.y,o.normal.z,r]}},this.getSectionPlaneSet=function(){return s.getCutPlaneSet(S)},this.getSectionPlanes=function(){var t=[];return["__set_view",S].forEach(function(e){var n=s.getCutPlaneSet(e);n.length>0&&t.push.apply(t,p(n))}),t},this.notifyCutplanesChanged=function(){var t=V.length;V.length=0;for(var e,n=s.getCutPlaneSets(),i=0;i<n.length;i++){var o=n[i];if(o!==S)for(var r=s.getCutPlaneSet(o),a=0;a<r.length;a++)V.push(r[a])}t!==V.length&&(e=s.sceneAfter.getObjectByName("section"))&&e.traverse(function(t){!t instanceof THREE.Mesh||!t.material||(t.material.needsUpdate=!0)})}};n(121);n.d(e,"SectionExtension",function(){return y});var y=function(t,e){Autodesk.Viewing.Extension.call(this,t,e),this.viewer=t,this.name="section",this.modes=["x","y","z","box"],this.onViewerSetView=this.onViewerSetView.bind(this),this.onCutPlanesChangedBinded=this.onCutPlanesChanged.bind(this)};y.prototype=Object.create(Autodesk.Viewing.Extension.prototype),y.prototype.constructor=y;var E=y.prototype;E.load=function(){var t=this,e=this.viewer;this.tool=new f(e,{tintColor:{r:1,g:1,b:0},tintIntensity:.2}),e.toolController.registerTool(this.tool),this.sectionStyle=null,this.supportedStyles=["X","Y","Z","BOX"],e.addEventListener(Autodesk.Viewing.SET_VIEW_EVENT,this.onViewerSetView),e.addEventListener(Autodesk.Viewing.CUTPLANES_CHANGE_EVENT,this.onCutPlanesChangedBinded),this.HOTKEYS_ID="Autodesk.Section.Hotkeys";var n=[{keycodes:[Autodesk.Viewing.KeyCode.ESCAPE],onRelease:function(){return t.enableSectionTool(!1)}}];return e.getHotkeyManager().pushHotkeys(this.HOTKEYS_ID,n),!0},E.unload=function(){var t=this.viewer;return t.getHotkeyManager().popHotkeys(this.HOTKEYS_ID),this.destroyUI(),t.removeEventListener(Autodesk.Viewing.SET_VIEW_EVENT,this.onViewerSetView),t.removeEventListener(Autodesk.Viewing.CUTPLANES_CHANGE_EVENT,this.onCutPlanesChangedBinded),t.toolController.deregisterTool(this.tool),this.tool=null,!0},E.toggle=function(){if(this.isActive())this.enableSectionTool(!1);else{var t=this.sectionStyle||"X";this.setSectionStyle(t,!0)}return this.isActive()},E.getSectionStyle=function(){return this.sectionStyle},E.setSectionStyle=function(t,e){if(-1===this.supportedStyles.indexOf(t))return!1;var n=this.isActive(),i=this.sectionStyle!==t||!e;return this.sectionStyle=t,n&&i?this.tool.setSection(t):n||(this.enableSectionTool(!0),i?this.tool.setSection(t):this.tool.attachControl(!0)),!0},E.setSectionFromPlane=function(t){if(this.deactivate(),t)this.tool.setSectionFromPlane(t),this.tool.attachControl(!1);else{this.tool.clearSection();var e=this.viewer.toolController.setIsLocked(!1);this.enableSectionTool(!1),this.viewer.toolController.setIsLocked(e)}},E.getSectionPlanes=function(){return this.tool.getSectionPlanes()},E.enableSectionTool=function(t){var e=this.viewer.toolController,n=this.tool.isActive();return t&&!n?(e.activateTool("section"),this.sectionToolButton&&this.sectionToolButton.setState(Autodesk.Viewing.UI.Button.State.ACTIVE),!0):!(t||!n)&&(e.deactivateTool("section"),this.sectionToolButton&&this.sectionToolButton.setState(Autodesk.Viewing.UI.Button.State.INACTIVE),!0)},E.getViewValues=function(t){var e=this.tool.getSectionBoxValues(t);if(e)return e;var n=this.tool.getSectionPlaneValues(t);return n||null},E.getState=function(t){if(this.viewer.model&&!this.viewer.model.is2d()){t.cutplanes=t.cutplanes||[];for(var e=this.tool.getSectionPlaneSet(),n=0;n<e.length;n++)t.cutplanes.push(e[n].toArray())}},E.restoreState=function(t,e){this.setSectionFromPlane(null);var n=this.getSectionPlanes();return 1===n.length&&this.setSectionFromPlane(n[0]),!0},E.onCutPlanesChanged=function(){this.tool.notifyCutplanesChanged()},E.onViewerSetView=function(){this.deactivate()},E.onToolbarCreated=function(t){this.viewer;var e=Autodesk.Viewing.UI;this.sectionToolButton=new e.ComboButton("toolbar-sectionTool"),this.sectionToolButton.setToolTip("Section analysis"),this.sectionToolButton.setIcon("adsk-icon-section-analysis"),this.createSubmenu(this.sectionToolButton);var n=t.getControl(Autodesk.Viewing.TOOLBAR.MODELTOOLSID);if(n){var i=n.getControl("toolbar-resetTool");i?n.addControl(this.sectionToolButton,{index:n.indexOf(i.getId())}):n.addControl(this.sectionToolButton,{index:0})}},E.createSubmenu=function(t){var e=this,n=this.viewer,i=Autodesk.Viewing.UI;function o(t,n){return function(){var o=t.getState(),r=function(){t instanceof i.ComboButton==!1?e.activate(n):(e.enableSectionTool(!0),e.tool.attachControl(!0))};o===i.Button.State.INACTIVE?(t.setState(i.Button.State.ACTIVE),Autodesk.Viewing.isMobileDevice()?setTimeout(r,1):r()):o===i.Button.State.ACTIVE&&(t.setState(i.Button.State.INACTIVE),e.deactivate()),e.sectionStyle=n.toUpperCase()}}var r=this.sectionXButton=new i.Button("toolbar-sectionTool-x");r.setToolTip("Add X plane"),r.setIcon("adsk-icon-plane-x"),r.onClick=o(r,"x"),t.addControl(r);var s=this.sectionYButton=new i.Button("toolbar-sectionTool-y");s.setToolTip("Add Y plane"),s.setIcon("adsk-icon-plane-y"),s.onClick=o(s,"y"),t.addControl(s);var a=this.sectionZButton=new i.Button("toolbar-sectionTool-z");a.setToolTip("Add Z plane"),a.setIcon("adsk-icon-plane-z"),a.onClick=o(a,"z"),t.addControl(a);var h=this.sectionBoxButton=new i.Button("toolbar-sectionTool-box");h.setToolTip("Add box"),h.setIcon("adsk-icon-box"),h.onClick=o(h,"box"),t.addControl(h),n.addEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,function t(){var i,o=(i=new THREE.Vector3,function(t,e,n){return i.subVectors(t,e),i.lengthSq()<n}),r=new THREE.Vector3(1,0,0),s=new THREE.Vector3(0,1,0),a=new THREE.Vector3(0,0,1),h=n.autocam.getWorldRightVector(),c=n.autocam.getWorldUpVector(),l=n.autocam.getWorldFrontVector();o(c,r,1e-4)?e.sectionYButton.setIcon("adsk-icon-plane-x"):o(c,a,1e-4)?e.sectionYButton.setIcon("adsk-icon-plane-z"):e.sectionYButton.setIcon("adsk-icon-plane-y"),o(h,s,1e-4)?e.sectionXButton.setIcon("adsk-icon-plane-y"):o(h,a,1e-4)?e.sectionXButton.setIcon("adsk-icon-plane-z"):e.sectionXButton.setIcon("adsk-icon-plane-x"),o(l,r,1e-4)?e.sectionZButton.setIcon("adsk-icon-plane-x"):o(l,s,1e-4)?e.sectionZButton.setIcon("adsk-icon-plane-y"):e.sectionZButton.setIcon("adsk-icon-plane-z"),n.removeEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,t)})},E.destroyUI=function(){this.sectionToolButton&&(this.sectionToolButton.removeFromParent(),this.sectionToolButton=null)},E.activate=function(t){if(!this.activeStatus||this.mode!==t){switch(this.enableSectionTool(!0),t){default:case"x":this.tool.setSection("X"),this.mode="x";break;case"y":this.tool.setSection("Y"),this.mode="y";break;case"z":this.tool.setSection("Z"),this.mode="z";break;case"box":this.tool.setSection("BOX"),this.mode="box"}return this.activeStatus=!0,!0}},E.deactivate=function(){return this.activeStatus&&(this.enableSectionTool(!1),this.activeStatus=!1),!0},Autodesk.Viewing.theExtensionManager.registerExtension("Autodesk.Section",y)},2:function(t,e,n){var i,o,r={},s=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=i.apply(this,arguments)),o}),a=function(t){var e={};return function(t,n){if("function"==typeof t)return t();if(void 0===e[t]){var i=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,n);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}}(),h=null,c=0,l=[],u=n(3);function p(t,e){for(var n=0;n<t.length;n++){var i=t[n],o=r[i.id];if(o){o.refs++;for(var s=0;s<o.parts.length;s++)o.parts[s](i.parts[s]);for(;s<i.parts.length;s++)o.parts.push(g(i.parts[s],e))}else{var a=[];for(s=0;s<i.parts.length;s++)a.push(g(i.parts[s],e));r[i.id]={id:i.id,refs:1,parts:a}}}}function d(t,e){for(var n=[],i={},o=0;o<t.length;o++){var r=t[o],s=e.base?r[0]+e.base:r[0],a={css:r[1],media:r[2],sourceMap:r[3]};i[s]?i[s].parts.push(a):n.push(i[s]={id:s,parts:[a]})}return n}function f(t,e){var n=a(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=l[l.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),l.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=a(t.insertAt.before,n);n.insertBefore(e,o)}}function y(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=l.indexOf(t);e>=0&&l.splice(e,1)}function E(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var i=function(){0;return n.nc}();i&&(t.attrs.nonce=i)}return v(e,t.attrs),f(t,e),e}function v(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function g(t,e){var n,i,o,r;if(e.transform&&t.css){if(!(r="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=r}if(e.singleton){var s=c++;n=h||(h=E(e)),i=w.bind(null,n,s,!1),o=w.bind(null,n,s,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",v(e,t.attrs),f(t,e),e}(e),i=function(t,e,n){var i=n.css,o=n.sourceMap,r=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||r)&&(i=u(i));o&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var s=new Blob([i],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,n,e),o=function(){y(n),n.href&&URL.revokeObjectURL(n.href)}):(n=E(e),i=function(t,e){var n=e.css,i=e.media;i&&t.setAttribute("media",i);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){y(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else o()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=s()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=d(t,e);return p(n,e),function(t){for(var i=[],o=0;o<n.length;o++){var s=n[o];(a=r[s.id]).refs--,i.push(a)}t&&p(d(t,e),e);for(o=0;o<i.length;o++){var a;if(0===(a=i[o]).refs){for(var h=0;h<a.parts.length;h++)a.parts[h]();delete r[a.id]}}}};var m,x=(m=[],function(t,e){return m[t]=e,m.filter(Boolean).join("\n")});function w(t,e,n,i){var o=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=x(e,o);else{var r=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}},21:function(t,e,n){"use strict";n.r(e),n.d(e,"xBoxPlane",function(){return o});var i=new THREE.Vector3;function o(t,e){i.set(e.min.x,e.min.y,e.min.z);var n=t.distanceToPoint(i),o=Math.sign(n);i.set(e.min.x,e.min.y,e.max.z);var r=t.distanceToPoint(i);return Math.sign(r)!==o||(i.set(e.min.x,e.max.y,e.min.z),r=t.distanceToPoint(i),Math.sign(r)!==o||(i.set(e.min.x,e.max.y,e.max.z),r=t.distanceToPoint(i),Math.sign(r)!==o||(i.set(e.max.x,e.min.y,e.min.z),r=t.distanceToPoint(i),Math.sign(r)!==o||(i.set(e.max.x,e.min.y,e.max.z),r=t.distanceToPoint(i),Math.sign(r)!==o||(i.set(e.max.x,e.max.y,e.min.z),r=t.distanceToPoint(i),Math.sign(r)!==o||(i.set(e.max.x,e.max.y,e.max.z),r=t.distanceToPoint(i),Math.sign(r)!==o))))))}},3:function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,i=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var o,r=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?t:(o=0===r.indexOf("//")?r:0===r.indexOf("/")?n+r:i+r.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},5:function(t,e,n){(function(n){var i,o,r,s,a;function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}a=function(){return function t(e,n,i){function o(a,h){if(!n[a]){if(!e[a]){if(!h&&("function"==typeof s&&s))return s(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return o(n||t)},l,l.exports,t,e,n,i)}return n[a].exports}for(var r="function"==typeof s&&s,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(t,e,n){e.exports={version:"1.5.0"}},{}],2:[function(t,e,n){"use strict";var i=function(t,e){this.head_=t,this.tail_=e,this.search_node_=t};i.prototype.head=function(){return this.head_},i.prototype.setHead=function(t){this.head_=t},i.prototype.tail=function(){return this.tail_},i.prototype.setTail=function(t){this.tail_=t},i.prototype.search=function(){return this.search_node_},i.prototype.setSearch=function(t){this.search_node_=t},i.prototype.findSearchNode=function(){return this.search_node_},i.prototype.locateNode=function(t){var e=this.search_node_;if(t<e.value){for(;e=e.prev;)if(t>=e.value)return this.search_node_=e,e}else for(;e=e.next;)if(t<e.value)return this.search_node_=e.prev,e.prev;return null},i.prototype.locatePoint=function(t){var e=t.x,n=this.findSearchNode(e),i=n.point.x;if(e===i){if(t!==n.point)if(t===n.prev.point)n=n.prev;else{if(t!==n.next.point)throw new Error("poly2tri Invalid AdvancingFront.locatePoint() call");n=n.next}}else if(e<i)for(;(n=n.prev)&&t!==n.point;);else for(;(n=n.next)&&t!==n.point;);return n&&(this.search_node_=n),n},e.exports=i,e.exports.Node=function(t,e){this.point=t,this.triangle=e||null,this.next=null,this.prev=null,this.value=t.x}},{}],3:[function(t,e,n){"use strict";e.exports=function(t,e){if(!t)throw new Error(e||"Assert Failed")}},{}],4:[function(t,e,n){"use strict";var i=t("./xy"),o=function(t,e){this.x=+t||0,this.y=+e||0,this._p2t_edge_list=null};o.prototype.toString=function(){return i.toStringBase(this)},o.prototype.toJSON=function(){return{x:this.x,y:this.y}},o.prototype.clone=function(){return new o(this.x,this.y)},o.prototype.set_zero=function(){return this.x=0,this.y=0,this},o.prototype.set=function(t,e){return this.x=+t||0,this.y=+e||0,this},o.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},o.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},o.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},o.prototype.mul=function(t){return this.x*=t,this.y*=t,this},o.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},o.prototype.normalize=function(){var t=this.length();return this.x/=t,this.y/=t,t},o.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},o.negate=function(t){return new o(-t.x,-t.y)},o.add=function(t,e){return new o(t.x+e.x,t.y+e.y)},o.sub=function(t,e){return new o(t.x-e.x,t.y-e.y)},o.mul=function(t,e){return new o(t*e.x,t*e.y)},o.cross=function(t,e){return"number"==typeof t?"number"==typeof e?t*e:new o(-t*e.y,t*e.x):"number"==typeof e?new o(e*t.y,-e*t.x):t.x*e.y-t.y*e.x},o.toString=i.toString,o.compare=i.compare,o.cmp=i.compare,o.equals=i.equals,o.dot=function(t,e){return t.x*e.x+t.y*e.y},e.exports=o},{"./xy":11}],5:[function(t,e,n){"use strict";var i=t("./xy"),o=function(t,e){this.name="PointError",this.points=e=e||[],this.message=t||"Invalid Points!";for(var n=0;n<e.length;n++)this.message+=" "+i.toString(e[n])};(o.prototype=new Error).constructor=o,e.exports=o},{"./xy":11}],6:[function(t,e,i){(function(e){"use strict";var n=e.poly2tri;i.noConflict=function(){return e.poly2tri=n,i},i.VERSION=t("../dist/version.json").version,i.PointError=t("./pointerror"),i.Point=t("./point"),i.Triangle=t("./triangle"),i.SweepContext=t("./sweepcontext");var o=t("./sweep");i.triangulate=o.triangulate,i.sweep={Triangulate:o.triangulate}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../dist/version.json":1,"./point":4,"./pointerror":5,"./sweep":7,"./sweepcontext":8,"./triangle":9}],7:[function(t,e,n){"use strict";var i=t("./assert"),o=t("./pointerror"),r=t("./triangle"),s=t("./advancingfront").Node,a=t("./utils"),h=a.EPSILON,c=a.Orientation,l=a.orient2d,u=a.inScanArea,p=a.isAngleObtuse;function d(t,e){var n=t.locateNode(e),o=function(t,e,n){var i=new r(e,n.point,n.next.point);i.markNeighbor(n.triangle),t.addToMap(i);var o=new s(e);o.next=n.next,o.prev=n,n.next.prev=o,n.next=o,g(t,i)||t.mapTriangleToNodes(i);return o}(t,e,n);return e.x<=n.point.x+h&&v(t,n),function(t,e){var n=e.next;for(;n.next&&!p(n.point,n.next.point,n.prev.point);)v(t,n),n=n.next;n=e.prev;for(;n.prev&&!p(n.point,n.next.point,n.prev.point);)v(t,n),n=n.prev;e.next&&e.next.next&&function(t){var e=t.point.x-t.next.next.point.x,n=t.point.y-t.next.next.point.y;return i(n>=0,"unordered y"),e>=0||Math.abs(e)<n}(e)&&function(t,e){l(e.point,e.next.point,e.next.next.point)===c.CCW?t.basin.left_node=e.next.next:t.basin.left_node=e.next;t.basin.bottom_node=t.basin.left_node;for(;t.basin.bottom_node.next&&t.basin.bottom_node.point.y>=t.basin.bottom_node.next.point.y;)t.basin.bottom_node=t.basin.bottom_node.next;if(t.basin.bottom_node===t.basin.left_node)return;t.basin.right_node=t.basin.bottom_node;for(;t.basin.right_node.next&&t.basin.right_node.point.y<t.basin.right_node.next.point.y;)t.basin.right_node=t.basin.right_node.next;if(t.basin.right_node===t.basin.bottom_node)return;t.basin.width=t.basin.right_node.point.x-t.basin.left_node.point.x,t.basin.left_highest=t.basin.left_node.point.y>t.basin.right_node.point.y,function t(e,n){if(function(t,e){var n;n=t.basin.left_highest?t.basin.left_node.point.y-e.point.y:t.basin.right_node.point.y-e.point.y;if(t.basin.width>n)return!0;return!1}(e,n))return;v(e,n);if(n.prev===e.basin.left_node&&n.next===e.basin.right_node)return;if(n.prev===e.basin.left_node){if(l(n.point,n.next.point,n.next.next.point)===c.CW)return;n=n.next}else if(n.next===e.basin.right_node){if(l(n.point,n.prev.point,n.prev.prev.point)===c.CCW)return;n=n.prev}else n=n.prev.point.y<n.next.point.y?n.prev:n.next;t(e,n)}(t,t.basin.bottom_node)}(t,e)}(t,o),o}function f(t,e,n){t.edge_event.constrained_edge=e,t.edge_event.right=e.p.x>e.q.x,E(n.triangle,e.p,e.q)||(!function(t,e,n){t.edge_event.right?function(t,e,n){for(;n.next.point.x<e.p.x;)l(e.q,n.next.point,e.p)===c.CCW?w(t,e,n):n=n.next}(t,e,n):function(t,e,n){for(;n.prev.point.x>e.p.x;)l(e.q,n.prev.point,e.p)===c.CW?b(t,e,n):n=n.prev}(t,e,n)}(t,e,n),y(t,e.p,e.q,n.triangle,e.q))}function y(t,e,n,i,r){if(!E(i,e,n)){var s=i.pointCCW(r),a=l(n,s,e);if(a===c.COLLINEAR)throw new o("poly2tri EdgeEvent: Collinear not supported!",[n,s,e]);var h=i.pointCW(r),u=l(n,h,e);if(u===c.COLLINEAR)throw new o("poly2tri EdgeEvent: Collinear not supported!",[n,h,e]);a===u?y(t,e,n,i=a===c.CW?i.neighborCCW(r):i.neighborCW(r),r):H(t,e,n,i,r)}}function E(t,e,n){var i=t.edgeIndex(e,n);if(-1!==i){t.markConstrainedEdgeByIndex(i);var o=t.getNeighbor(i);return o&&o.markConstrainedEdgeByPoints(e,n),!0}return!1}function v(t,e){var n=new r(e.prev.point,e.point,e.next.point);n.markNeighbor(e.prev.triangle),n.markNeighbor(e.triangle),t.addToMap(n),e.prev.next=e.next,e.next.prev=e.prev,g(t,n)||t.mapTriangleToNodes(n)}function g(t,e){for(var n=0;n<3;++n)if(!e.delaunay_edge[n]){var i=e.getNeighbor(n);if(i){var o=e.getPoint(n),r=i.oppositePoint(e,o),s=i.index(r);if(i.constrained_edge[s]||i.delaunay_edge[s]){e.constrained_edge[n]=i.constrained_edge[s];continue}if(m(o,e.pointCCW(o),e.pointCW(o),r)){e.delaunay_edge[n]=!0,i.delaunay_edge[s]=!0,x(e,o,i,r);var a=!g(t,e);return a&&t.mapTriangleToNodes(e),(a=!g(t,i))&&t.mapTriangleToNodes(i),e.delaunay_edge[n]=!1,i.delaunay_edge[s]=!1,!0}}}return!1}function m(t,e,n,i){var o=t.x-i.x,r=t.y-i.y,s=e.x-i.x,a=e.y-i.y,h=o*a-s*r;if(h<=0)return!1;var c=n.x-i.x,l=n.y-i.y,u=c*r-o*l;return!(u<=0)&&(o*o+r*r)*(s*l-c*a)+(s*s+a*a)*u+(c*c+l*l)*h>0}function x(t,e,n,i){var o,r,s,a,h,c,l,u,p,d,f,y;o=t.neighborCCW(e),r=t.neighborCW(e),s=n.neighborCCW(i),a=n.neighborCW(i),h=t.getConstrainedEdgeCCW(e),c=t.getConstrainedEdgeCW(e),l=n.getConstrainedEdgeCCW(i),u=n.getConstrainedEdgeCW(i),p=t.getDelaunayEdgeCCW(e),d=t.getDelaunayEdgeCW(e),f=n.getDelaunayEdgeCCW(i),y=n.getDelaunayEdgeCW(i),t.legalize(e,i),n.legalize(i,e),n.setDelaunayEdgeCCW(e,p),t.setDelaunayEdgeCW(e,d),t.setDelaunayEdgeCCW(i,f),n.setDelaunayEdgeCW(i,y),n.setConstrainedEdgeCCW(e,h),t.setConstrainedEdgeCW(e,c),t.setConstrainedEdgeCCW(i,l),n.setConstrainedEdgeCW(i,u),t.clearNeighbors(),n.clearNeighbors(),o&&n.markNeighbor(o),r&&t.markNeighbor(r),s&&t.markNeighbor(s),a&&n.markNeighbor(a),t.markNeighbor(n)}function w(t,e,n){n.point.x<e.p.x&&(l(n.point,n.next.point,n.next.next.point)===c.CCW?T(t,e,n):(!function t(e,n,i){l(i.next.point,i.next.next.point,i.next.next.next.point)===c.CCW?T(e,n,i.next):l(n.q,i.next.next.point,n.p)===c.CCW&&t(e,n,i.next)}(t,e,n),w(t,e,n)))}function T(t,e,n){v(t,n.next),n.next.point!==e.p&&l(e.q,n.next.point,e.p)===c.CCW&&l(n.point,n.next.point,n.next.next.point)===c.CCW&&T(t,e,n)}function b(t,e,n){n.point.x>e.p.x&&(l(n.point,n.prev.point,n.prev.prev.point)===c.CW?R(t,e,n):(!function t(e,n,i){l(i.prev.point,i.prev.prev.point,i.prev.prev.prev.point)===c.CW?R(e,n,i.prev):l(n.q,i.prev.prev.point,n.p)===c.CW&&t(e,n,i.prev)}(t,e,n),b(t,e,n)))}function R(t,e,n){v(t,n.prev),n.prev.point!==e.p&&l(e.q,n.prev.point,e.p)===c.CW&&l(n.point,n.prev.point,n.prev.prev.point)===c.CW&&R(t,e,n)}function H(t,e,n,r,s){var a=r.neighborAcross(s);i(a,"FLIP failed due to missing triangle!");var h=a.oppositePoint(r,s);if(r.getConstrainedEdgeAcross(s)){var p=r.index(s);throw new o("poly2tri Intersecting Constraints",[s,h,r.getPoint((p+1)%3),r.getPoint((p+2)%3)])}u(s,r.pointCCW(s),r.pointCW(s),h)?(x(r,s,a,h),t.mapTriangleToNodes(r),t.mapTriangleToNodes(a),s===n&&h===e?n===t.edge_event.constrained_edge.q&&e===t.edge_event.constrained_edge.p&&(r.markConstrainedEdgeByPoints(e,n),a.markConstrainedEdgeByPoints(e,n),g(t,r),g(t,a)):H(t,e,n,r=function(t,e,n,i,o,r){var s;if(e===c.CCW)return s=i.edgeIndex(o,r),i.delaunay_edge[s]=!0,g(t,i),i.clearDelaunayEdges(),n;return s=n.edgeIndex(o,r),n.delaunay_edge[s]=!0,g(t,n),n.clearDelaunayEdges(),i}(t,l(n,h,e),r,a,s,h),s)):(!function t(e,n,o,r,s,a){var h=s.neighborAcross(a);i(h,"FLIP failed due to missing triangle");var c=h.oppositePoint(s,a);if(u(o,r.pointCCW(o),r.pointCW(o),c))H(e,o,c,h,c);else{var l=M(n,o,h,c);t(e,n,o,r,h,l)}}(t,e,n,r,a,M(e,n,a,h)),y(t,e,n,r,s))}function M(t,e,n,i){var r=l(e,i,t);if(r===c.CW)return n.pointCCW(i);if(r===c.CCW)return n.pointCW(i);throw new o("poly2tri [Unsupported] nextFlipPoint: opposing point on constrained edge!",[e,i,t])}n.triangulate=function(t){t.initTriangulation(),t.createAdvancingFront(),function(t){var e,n=t.pointCount();for(e=1;e<n;++e)for(var i=t.getPoint(e),o=d(t,i),r=i._p2t_edge_list,s=0;r&&s<r.length;++s)f(t,r[s],o)}(t),function(t){for(var e=t.front().head().next.triangle,n=t.front().head().next.point;!e.getConstrainedEdgeCW(n);)e=e.neighborCCW(n);t.meshClean(e)}(t)}},{"./advancingfront":2,"./assert":3,"./pointerror":5,"./triangle":9,"./utils":10}],8:[function(t,e,n){"use strict";var i=t("./pointerror"),o=t("./point"),r=t("./triangle"),s=t("./sweep"),a=t("./advancingfront"),h=a.Node,c=function(t,e){if(this.p=t,this.q=e,t.y>e.y)this.q=t,this.p=e;else if(t.y===e.y)if(t.x>e.x)this.q=t,this.p=e;else if(t.x===e.x)throw new i("poly2tri Invalid Edge constructor: repeated points!",[t]);this.q._p2t_edge_list||(this.q._p2t_edge_list=[]),this.q._p2t_edge_list.push(this)},l=function(){this.left_node=null,this.bottom_node=null,this.right_node=null,this.width=0,this.left_highest=!1};l.prototype.clear=function(){this.left_node=null,this.bottom_node=null,this.right_node=null,this.width=0,this.left_highest=!1};var u=function(){this.constrained_edge=null,this.right=!1},p=function(t,e){e=e||{},this.triangles_=[],this.map_=[],this.points_=e.cloneArrays?t.slice(0):t,this.edge_list=[],this.pmin_=this.pmax_=null,this.front_=null,this.head_=null,this.tail_=null,this.af_head_=null,this.af_middle_=null,this.af_tail_=null,this.basin=new l,this.edge_event=new u,this.initEdges(this.points_)};p.prototype.addHole=function(t){this.initEdges(t);var e,n=t.length;for(e=0;e<n;e++)this.points_.push(t[e]);return this},p.prototype.AddHole=p.prototype.addHole,p.prototype.addHoles=function(t){var e,n=t.length;for(e=0;e<n;e++)this.initEdges(t[e]);return this.points_=this.points_.concat.apply(this.points_,t),this},p.prototype.addPoint=function(t){return this.points_.push(t),this},p.prototype.AddPoint=p.prototype.addPoint,p.prototype.addPoints=function(t){return this.points_=this.points_.concat(t),this},p.prototype.triangulate=function(){return s.triangulate(this),this},p.prototype.getBoundingBox=function(){return{min:this.pmin_,max:this.pmax_}},p.prototype.getTriangles=function(){return this.triangles_},p.prototype.GetTriangles=p.prototype.getTriangles,p.prototype.front=function(){return this.front_},p.prototype.pointCount=function(){return this.points_.length},p.prototype.head=function(){return this.head_},p.prototype.setHead=function(t){this.head_=t},p.prototype.tail=function(){return this.tail_},p.prototype.setTail=function(t){this.tail_=t},p.prototype.getMap=function(){return this.map_},p.prototype.initTriangulation=function(){var t,e=this.points_[0].x,n=this.points_[0].x,i=this.points_[0].y,r=this.points_[0].y,s=this.points_.length;for(t=1;t<s;t++){var a=this.points_[t];a.x>e&&(e=a.x),a.x<n&&(n=a.x),a.y>i&&(i=a.y),a.y<r&&(r=a.y)}this.pmin_=new o(n,r),this.pmax_=new o(e,i);var h=.3*(e-n),c=.3*(i-r);this.head_=new o(e+h,r-c),this.tail_=new o(n-h,r-c),this.points_.sort(o.compare)},p.prototype.initEdges=function(t,e){var n,i=t.length,o=e?t.length-1:t.length;for(n=0;n<o;++n)this.edge_list.push(new c(t[n],t[(n+1)%i]))},p.prototype.getPoint=function(t){return this.points_[t]},p.prototype.addToMap=function(t){this.map_.push(t)},p.prototype.locateNode=function(t){return this.front_.locateNode(t.x)},p.prototype.createAdvancingFront=function(){var t,e,n,i=new r(this.points_[0],this.tail_,this.head_);this.map_.push(i),t=new h(i.getPoint(1),i),e=new h(i.getPoint(0),i),n=new h(i.getPoint(2)),this.front_=new a(t,n),t.next=e,e.next=n,e.prev=t,n.prev=e},p.prototype.removeNode=function(t){},p.prototype.mapTriangleToNodes=function(t){for(var e=0;e<3;++e)if(!t.getNeighbor(e)){var n=this.front_.locatePoint(t.pointCW(t.getPoint(e)));n&&(n.triangle=t)}},p.prototype.removeFromMap=function(t){var e,n=this.map_,i=n.length;for(e=0;e<i;e++)if(n[e]===t){n.splice(e,1);break}},p.prototype.meshClean=function(t){for(var e,n,i=[t];e=i.pop();)if(!e.isInterior())for(e.setInterior(!0),this.triangles_.push(e),n=0;n<3;n++)e.constrained_edge[n]||i.push(e.getNeighbor(n))},e.exports=p},{"./advancingfront":2,"./point":4,"./pointerror":5,"./sweep":7,"./triangle":9}],9:[function(t,e,n){"use strict";var i=function(t,e,n){this.points_=[t,e,n],this.neighbors_=[null,null,null],this.interior_=!1,this.constrained_edge=[!1,!1,!1],this.delaunay_edge=[!1,!1,!1]},o=t("./xy").toString;i.prototype.toString=function(){return"["+o(this.points_[0])+o(this.points_[1])+o(this.points_[2])+"]"},i.prototype.getPoint=function(t){return this.points_[t]},i.prototype.GetPoint=i.prototype.getPoint,i.prototype.getPoints=function(){return this.points_},i.prototype.getNeighbor=function(t){return this.neighbors_[t]},i.prototype.containsPoint=function(t){var e=this.points_;return t===e[0]||t===e[1]||t===e[2]},i.prototype.containsEdge=function(t){return this.containsPoint(t.p)&&this.containsPoint(t.q)},i.prototype.containsPoints=function(t,e){return this.containsPoint(t)&&this.containsPoint(e)},i.prototype.isInterior=function(){return this.interior_},i.prototype.setInterior=function(t){return this.interior_=t,this},i.prototype.markNeighborPointers=function(t,e,n){var i=this.points_;if(t===i[2]&&e===i[1]||t===i[1]&&e===i[2])this.neighbors_[0]=n;else if(t===i[0]&&e===i[2]||t===i[2]&&e===i[0])this.neighbors_[1]=n;else{if(!(t===i[0]&&e===i[1]||t===i[1]&&e===i[0]))throw new Error("poly2tri Invalid Triangle.markNeighborPointers() call");this.neighbors_[2]=n}},i.prototype.markNeighbor=function(t){var e=this.points_;t.containsPoints(e[1],e[2])?(this.neighbors_[0]=t,t.markNeighborPointers(e[1],e[2],this)):t.containsPoints(e[0],e[2])?(this.neighbors_[1]=t,t.markNeighborPointers(e[0],e[2],this)):t.containsPoints(e[0],e[1])&&(this.neighbors_[2]=t,t.markNeighborPointers(e[0],e[1],this))},i.prototype.clearNeighbors=function(){this.neighbors_[0]=null,this.neighbors_[1]=null,this.neighbors_[2]=null},i.prototype.clearDelaunayEdges=function(){this.delaunay_edge[0]=!1,this.delaunay_edge[1]=!1,this.delaunay_edge[2]=!1},i.prototype.pointCW=function(t){var e=this.points_;return t===e[0]?e[2]:t===e[1]?e[0]:t===e[2]?e[1]:null},i.prototype.pointCCW=function(t){var e=this.points_;return t===e[0]?e[1]:t===e[1]?e[2]:t===e[2]?e[0]:null},i.prototype.neighborCW=function(t){return t===this.points_[0]?this.neighbors_[1]:t===this.points_[1]?this.neighbors_[2]:this.neighbors_[0]},i.prototype.neighborCCW=function(t){return t===this.points_[0]?this.neighbors_[2]:t===this.points_[1]?this.neighbors_[0]:this.neighbors_[1]},i.prototype.getConstrainedEdgeCW=function(t){return t===this.points_[0]?this.constrained_edge[1]:t===this.points_[1]?this.constrained_edge[2]:this.constrained_edge[0]},i.prototype.getConstrainedEdgeCCW=function(t){return t===this.points_[0]?this.constrained_edge[2]:t===this.points_[1]?this.constrained_edge[0]:this.constrained_edge[1]},i.prototype.getConstrainedEdgeAcross=function(t){return t===this.points_[0]?this.constrained_edge[0]:t===this.points_[1]?this.constrained_edge[1]:this.constrained_edge[2]},i.prototype.setConstrainedEdgeCW=function(t,e){t===this.points_[0]?this.constrained_edge[1]=e:t===this.points_[1]?this.constrained_edge[2]=e:this.constrained_edge[0]=e},i.prototype.setConstrainedEdgeCCW=function(t,e){t===this.points_[0]?this.constrained_edge[2]=e:t===this.points_[1]?this.constrained_edge[0]=e:this.constrained_edge[1]=e},i.prototype.getDelaunayEdgeCW=function(t){return t===this.points_[0]?this.delaunay_edge[1]:t===this.points_[1]?this.delaunay_edge[2]:this.delaunay_edge[0]},i.prototype.getDelaunayEdgeCCW=function(t){return t===this.points_[0]?this.delaunay_edge[2]:t===this.points_[1]?this.delaunay_edge[0]:this.delaunay_edge[1]},i.prototype.setDelaunayEdgeCW=function(t,e){t===this.points_[0]?this.delaunay_edge[1]=e:t===this.points_[1]?this.delaunay_edge[2]=e:this.delaunay_edge[0]=e},i.prototype.setDelaunayEdgeCCW=function(t,e){t===this.points_[0]?this.delaunay_edge[2]=e:t===this.points_[1]?this.delaunay_edge[0]=e:this.delaunay_edge[1]=e},i.prototype.neighborAcross=function(t){return t===this.points_[0]?this.neighbors_[0]:t===this.points_[1]?this.neighbors_[1]:this.neighbors_[2]},i.prototype.oppositePoint=function(t,e){var n=t.pointCW(e);return this.pointCW(n)},i.prototype.legalize=function(t,e){var n=this.points_;if(t===n[0])n[1]=n[0],n[0]=n[2],n[2]=e;else if(t===n[1])n[2]=n[1],n[1]=n[0],n[0]=e;else{if(t!==n[2])throw new Error("poly2tri Invalid Triangle.legalize() call");n[0]=n[2],n[2]=n[1],n[1]=e}},i.prototype.index=function(t){var e=this.points_;if(t===e[0])return 0;if(t===e[1])return 1;if(t===e[2])return 2;throw new Error("poly2tri Invalid Triangle.index() call")},i.prototype.edgeIndex=function(t,e){var n=this.points_;if(t===n[0]){if(e===n[1])return 2;if(e===n[2])return 1}else if(t===n[1]){if(e===n[2])return 0;if(e===n[0])return 2}else if(t===n[2]){if(e===n[0])return 1;if(e===n[1])return 0}return-1},i.prototype.markConstrainedEdgeByIndex=function(t){this.constrained_edge[t]=!0},i.prototype.markConstrainedEdgeByEdge=function(t){this.markConstrainedEdgeByPoints(t.p,t.q)},i.prototype.markConstrainedEdgeByPoints=function(t,e){var n=this.points_;e===n[0]&&t===n[1]||e===n[1]&&t===n[0]?this.constrained_edge[2]=!0:e===n[0]&&t===n[2]||e===n[2]&&t===n[0]?this.constrained_edge[1]=!0:(e===n[1]&&t===n[2]||e===n[2]&&t===n[1])&&(this.constrained_edge[0]=!0)},e.exports=i},{"./xy":11}],10:[function(t,e,n){"use strict";var i=1e-12;n.EPSILON=i;var o={CW:1,CCW:-1,COLLINEAR:0};n.Orientation=o,n.orient2d=function(t,e,n){var r=(t.x-n.x)*(e.y-n.y)-(t.y-n.y)*(e.x-n.x);return r>-i&&r<i?o.COLLINEAR:r>0?o.CCW:o.CW},n.inScanArea=function(t,e,n,o){return!((t.x-e.x)*(o.y-e.y)-(o.x-e.x)*(t.y-e.y)>=-i||(t.x-n.x)*(o.y-n.y)-(o.x-n.x)*(t.y-n.y)<=i)},n.isAngleObtuse=function(t,e,n){var i=e.x-t.x,o=e.y-t.y;return i*(n.x-t.x)+o*(n.y-t.y)<0}},{}],11:[function(t,e,n){"use strict";function i(t){return"("+t.x+";"+t.y+")"}e.exports={toString:function(t){var e=t.toString();return"[object Object]"===e?i(t):e},toStringBase:i,compare:function(t,e){return t.y===e.y?t.x-e.x:t.y-e.y},equals:function(t,e){return t.x===e.x&&t.y===e.y}}},{}]},{},[6])(6)},"object"===h(e)&&void 0!==t?t.exports=a():(o=[],void 0===(r="function"==typeof(i=a)?i.apply(e,o):i)||(t.exports=r))}).call(this,n(18))},6:function(t,e,n){"use strict";n.r(e),n.d(e,"xPlaneSegment",function(){return r});var i=n(0),o=new THREE.Vector3;function r(t,e,n,r,s){var a=o.subVectors(n,e),h=t.normal.dot(a);if(Object(i.isZero)(h))return r.copy(e),s.copy(n),2;h=1/h;var c=-(e.dot(t.normal)*h+t.constant*h);if(c<-i.TOL||c>1+i.TOL)return 0;var l=a.multiplyScalar(c).add(e);return r.copy(l),1}},8:function(t,e,n){"use strict";function i(){this.bbox=new THREE.Box2,this.left=null,this.right=null,this.node_edges=[]}function o(t,e,n){this.pts=t,this.edges=e,this.bbox=n,this.pipResult=!1}n.r(e),n.d(e,"IntervalTree",function(){return o}),o.prototype.splitNode=function(t){if(!(t.bbox.min.y>=t.bbox.max.y||t.node_edges.length<3)){var e=.5*(t.bbox.min.y+t.bbox.max.y);t.left=new i,t.right=new i;for(var n=this.pts,o=t.node_edges,r=[],s=new THREE.Vector2,a=0;a<o.length;a++){var h=this.edges[o[a]],c=n[h.p1].y,l=n[h.p2].y;if(c>l){var u=c;c=l,l=u}var p=null;l<e?(t.left.node_edges.push(o[a]),p=t.left.bbox):c>e?(t.right.node_edges.push(o[a]),p=t.right.bbox):r.push(o[a]),p&&(s.set(n[h.p1].x,n[h.p1].y),p.expandByPoint(s),s.set(n[h.p2].x,n[h.p2].y),p.expandByPoint(s))}t.node_edges=r,t.left.node_edges.length&&this.splitNode(t.left),t.right.node_edges.length&&this.splitNode(t.right)}},o.prototype.build=function(){this.root=new i;for(var t=this.root.node_edges,e=0;e<this.edges.length;e++)t.push(e);this.root.bbox.copy(this.bbox),this.splitNode(this.root)},o.prototype.pointInPolygonRec=function(t,e,n){if(t.bbox.min.y<=n&&t.bbox.max.y>=n)for(var i=this.pts,o=t.node_edges,r=0,s=o.length;r<s;r++){var a=this.edges[o[r]],h=i[a.p1],c=h.x,l=h.y,u=l>=n,p=i[a.p2],d=p.x,f=p.y,y=f>=n;u!=y&&(f-n)*(c-d)>=(d-e)*(l-f)==y&&(this.pipResult=!this.pipResult)}var E=t.left;E&&E.bbox.min.y<=n&&E.bbox.max.y>=n&&this.pointInPolygonRec(E,e,n);var v=t.right;v&&v.bbox.min.y<=n&&v.bbox.max.y>=n&&this.pointInPolygonRec(v,e,n)},o.prototype.pointInPolygon=function(t,e){return this.pipResult=!1,this.pointInPolygonRec(this.root,t,e),this.pipResult}},9:function(t,e,n){"use strict";n.r(e),n.d(e,"QuadTree",function(){return a});var i=n(10),o=n(11);function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s=Autodesk.Viewing.Private.logger,a=function(){function t(e,n,i,o,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.items=[],this.children=null,this.itemCount=0,this.extraDistance=r,this.minx=e,this.miny=n,this.maxx=i,this.maxy=o}var e,n,a;return e=t,(n=[{key:"addItem",value:function(t){if(this.itemCount++,this.children){for(var e=0,n=null,i=0;i<4;i++)this.children[i].intersectsItem(t)&&(n=this.children[i],e++);0===e||(1===e?n.addItem(t):this.items.push(t))}else this.items.push(t),this.items.length>16&&this.subdivide();return this.itemCount}},{key:"deleteItem",value:function(t){if(!this.intersectsItem(t))return 0;if(this.items){var e=this.items.indexOf(t);if(e>=0)return this.items.splice(e,1),this.itemCount--,1}if(this.children){for(var n=0,i=0;i<4;i++)n+=this.children[i].deleteItem(t),this.children[i].itemCount;return 1===n?(this.itemCount--,1):(s.warn("Did not find item to delete. Something is wrong.",n),0)}return 0}},{key:"intersectsBox",value:function(t,e,n,i){var r=this.extraDistance;return Object(o.xBoxBox)(t,e,n,i,this.minx-r,this.miny-r,this.maxx+r,this.maxy+r)}},{key:"intersectsItem",value:function(t){return t.v1?Object(i.xLineBox)(t.v1.x,t.v1.y,t.v2.x,t.v2.y,this.minx-this.extraDistance,this.miny-this.extraDistance,this.maxx+this.extraDistance,this.maxy+this.extraDistance):this.intersectsBox(t.x,t.y,t.x,t.y)}},{key:"findSplitPoint",value:function(){var t=[],e=[];if(this.items[0].v1)for(var n=0;n<this.items.length;n++)t.push(this.items[n].v1.x),e.push(this.items[n].v1.y);else for(var i=0;i<this.items.length;i++)t.push(this.items[i].x),e.push(this.items[i].y);t.sort(function(t,e){return t-e}),e.sort(function(t,e){return t-e});var o=t[0|(t.length+1)/2]-this.extraDistance-1e-20,r=e[0|(e.length+1)/2]-this.extraDistance-1e-20;return o<=this.minx||o>=this.maxx||r<=this.miny||r>=this.maxy?(s.warn("Failed to split quad tree node. Something is wrong with the split choice."),null):{midx:o,midy:r}}},{key:"subdivide",value:function(){if(this.children)s.error("Attempt to subdivide already split node");else if(this.items.length){var e=this.minx,n=this.miny,i=this.maxx,o=this.maxy,r=this.findSplitPoint();if(r){var a=r.midx,h=r.midy;this.children=new Array(4),this.children[0]=new t(e,n,a,h,this.extraDistance),this.children[1]=new t(a,n,i,h,this.extraDistance),this.children[2]=new t(a,h,i,o,this.extraDistance),this.children[3]=new t(e,h,a,o,this.extraDistance);for(var c=[],l=0,u=this.items.length;l<u;l++){for(var p=0,d=null,f=0;f<4;f++)this.children[f].intersectsItem(this.items[l])&&(d=this.children[f],p++);0===p?s.error("Expected at least one overlap"):1===p?d.addItem(this.items[l]):c.push(this.items[l])}this.items=c}else s.warn("Failed to split node")}else s.error("Attempt to subdivide empty node")}},{key:"enumNearItems",value:function(t,e){if(this.intersectsItem(t)){if(this.items)for(var n=0;n<this.items.length;n++)e(this.items[n]);if(this.children)for(var i=0;i<4;i++)this.children[i].enumNearItems(t,e)}}},{key:"enumInBox",value:function(t,e,n,r,s){if(this.intersectsBox(t,e,n,r)){if(this.items)for(var a=0;a<this.items.length;a++){var h=this.items[a];h.v1?Object(i.xLineBox)(h.v1.x,h.v1.y,h.v2.x,h.v2.y,t,e,n,r)&&s(h):Object(o.xBoxBox)(h.x,h.y,h.x,h.y,t,e,n,r)&&s(h)}if(this.children)for(var c=0;c<4;c++)this.children[c].enumInBox(t,e,n,r,s)}}},{key:"pointInPolygonRec",value:function(t,e,n){var i=t.v1.x,o=t.v1.y,r=o>=n,s=t.v2.x,a=t.v2.y,h=a>=n;r!=h&&(a-n)*(i-s)>=(s-e)*(o-a)==h&&(this.pipResult=!this.pipResult)}},{key:"pointInPolygon",value:function(t,e){var n=this;return this.pipResult=!1,this.enumInBox(-1/0,e,1/0,e,function(i){n.pointInPolygonRec(i,t,e)}),this.pipResult}}])&&r(e.prototype,n),a&&r(e,a),t}()}});
//# sourceMappingURL=Section.min.js.map